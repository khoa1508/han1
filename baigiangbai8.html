<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BÃ i 8: TÃ¡o bao nhiÃªu tiá»n má»™t cÃ¢n? - GiÃ¡o Ã¡n HÃ¡n ngá»¯ 1 (Full)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Roboto', sans-serif; background-color: #fff1f2; }
        .cn-text { font-family: 'Noto Sans SC', sans-serif; }
        
        /* Hiá»‡u á»©ng láº­t tháº» tá»« vá»±ng */
        .perspective-1000 { perspective: 1000px; }
        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .flip-card.flipped .flip-card-inner { transform: rotateY(180deg); }
        .flip-card-front, .flip-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 0.75rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .flip-card-front { background-color: white; border: 2px solid #fce7f3; }
        .flip-card-back { background-color: #fbcfe8; transform: rotateY(180deg); border: 2px solid #db2777; }

        /* áº¨n/Hiá»‡n Pinyin */
        .pinyin-blur {
            filter: blur(5px);
            opacity: 0.5;
            transition: all 0.3s ease;
            cursor: pointer;
            user-select: none;
            background-color: #fce7f3; /* Ná»n nháº¹ Ä‘á»ƒ che */
            border-radius: 4px;
            padding: 0 4px;
        }
        .pinyin-blur:hover, .pinyin-revealed {
            filter: blur(0);
            opacity: 1;
            background-color: transparent;
        }
        
        .reveal-hint {
            font-size: 0.65rem;
            color: #db2777;
            margin-top: 2px;
            font-style: italic;
            opacity: 0.8;
        }
        .pinyin-revealed + .reveal-hint {
            display: none;
        }


        /* Thanh cuá»™n */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #db2777; border-radius: 4px; }
        
        .highlight { color: #be185d; font-weight: bold; background-color: #fce7f3; padding: 0 4px; rounded: 4px; }
        .grammar-box { border-left: 4px solid #db2777; background-color: white; padding: 1rem; margin-bottom: 1rem; border-radius: 0 0.5rem 0.5rem 0; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    </style>
</head>
<body class="text-slate-800">

    <!-- Navigation -->
    <nav class="bg-rose-600 text-white sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto px-4 py-3 flex flex-wrap justify-between items-center">
            <h1 class="text-xl font-bold"><i class="fas fa-store mr-2"></i>HÃ¡n ngá»¯ 1 - BÃ i 8</h1>
            <div class="hidden md:flex space-x-4 text-sm font-medium">
                <a href="#warmup" class="hover:text-rose-200 transition">Khá»Ÿi Ä‘á»™ng</a>
                <a href="#vocab" class="hover:text-rose-200 transition">Tá»« vá»±ng (áº¨n Pinyin)</a>
                <a href="#grammar" class="hover:text-rose-200 transition">Ngá»¯ phÃ¡p</a>
                <a href="#reading" class="hover:text-rose-200 transition">Äá»c hiá»ƒu</a>
                <a href="#practice" class="hover:text-rose-200 transition">Thá»±c hÃ nh</a>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <header class="bg-white py-10 text-center border-b border-rose-200">
        <div class="container mx-auto px-4">
            <h2 class="text-5xl font-bold text-rose-700 mb-4 cn-text">è‹¹æœä¸€æ–¤å¤šå°‘é’±?</h2>
            <h3 class="text-2xl text-slate-600 mb-4">PÃ­ngguÇ’ yÃ¬ jÄ«n duÅshao qiÃ¡n?</h3>
            <p class="text-slate-500 italic max-w-2xl mx-auto">Chá»§ Ä‘á»: Mua sáº¯m hoa quáº£ & Máº·c cáº£ giÃ¡ tiá»n</p>
        </div>
    </header>

    <!-- PHáº¦N 1: KHá»I Äá»˜NG (WARM-UP) -->
    <section id="warmup" class="py-12 container mx-auto px-4">
        <div class="flex items-center mb-6">
            <div class="bg-rose-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold mr-3">1</div>
            <h2 class="text-2xl font-bold text-rose-800">Khá»Ÿi Ä‘á»™ng & TÆ° duy (Brainstorming)</h2>
        </div>

        <div class="grid md:grid-cols-2 gap-8 items-center">
            <div>
                <img src="https://images.unsplash.com/photo-1610832958506-aa56368176cf?q=80&w=2070&auto=format&fit=crop" alt="Asian Fruit Market" class="rounded-xl shadow-lg w-full h-64 object-cover">
                <p class="text-center text-sm text-gray-500 mt-2">Chá»£ hoa quáº£ Ä‘a dáº¡ng táº¡i Trung Quá»‘c</p>
            </div>
            <div class="space-y-4">
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-blue-500 cursor-pointer hover:bg-blue-50 transition" onclick="alert('Gá»£i Ã½: SiÃªu thá»‹ (ChÄoshÃ¬) thÆ°á»ng niÃªm yáº¿t giÃ¡ cá»‘ Ä‘á»‹nh. Chá»£ (CÃ ishÃ¬chÇng) hoáº·c sáº¡p hÃ ng ven Ä‘Æ°á»ng lÃ  nÆ¡i dá»… máº·c cáº£ nháº¥t!')">
                    <h4 class="font-bold text-blue-700 mb-1"><i class="fas fa-comment-dollar mr-2"></i>CÃ¢u há»i 1:</h4>
                    <p>Theo báº¡n, á»Ÿ Ä‘Ã¢u thÃ¬ chÃºng ta Ä‘Æ°á»£c phÃ©p <strong>máº·c cáº£ (tráº£ giÃ¡)</strong>? á» siÃªu thá»‹ cÃ³ Ä‘Æ°á»£c khÃ´ng?</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-green-500 cursor-pointer hover:bg-green-50 transition" onclick="alert('LÆ°u Ã½: 1 cÃ¢n TQ (JÄ«n) = 0.5 kg. Náº¿u tÃ¡o giÃ¡ 4 tá»‡/cÃ¢n, tá»©c lÃ  8 tá»‡/kg (~28k VNÄ/kg). KhÃ¡ ráº»!')">
                    <h4 class="font-bold text-green-700 mb-1"><i class="fas fa-scale-balanced mr-2"></i>CÃ¢u há»i 2:</h4>
                    <p>1 "CÃ¢n" (JÄ«n) cá»§a Trung Quá»‘c cÃ³ báº±ng 1kg cá»§a Viá»‡t Nam khÃ´ng? Náº¿u mua 2 JÄ«n tÃ¡o thÃ¬ lÃ  bao nhiÃªu kg?</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-yellow-500 cursor-pointer hover:bg-yellow-50 transition" onclick="alert('Tá»« vá»±ng: LiÃºliÃ¡n (Sáº§u riÃªng) - WÃ¡ng (Vua), ShÄnzhÃº (MÄƒng cá»¥t) - HÃ²uwÃ¡ng (Ná»¯ hoÃ ng).')">
                    <h4 class="font-bold text-yellow-700 mb-1"><i class="fas fa-crown mr-2"></i>CÃ¢u há»i 3:</h4>
                    <p>Loáº¡i quáº£ nÃ o Ä‘Æ°á»£c má»‡nh danh lÃ  "Vua trÃ¡i cÃ¢y" vÃ  loáº¡i nÃ o lÃ  "Ná»¯ hoÃ ng trÃ¡i cÃ¢y"? (Gá»£i Ã½: CÃ³ trong bÃ i)</p>
                </div>
            </div>
        </div>
    </section>

    <!-- PHáº¦N 2: Tá»ª Vá»°NG (VOCABULARY) -->
    <section id="vocab" class="py-12 bg-white">
        <div class="container mx-auto px-4">
            <div class="flex items-center mb-6">
                <div class="bg-rose-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold mr-3">2</div>
                <h2 class="text-2xl font-bold text-rose-800">Tá»« vá»±ng & VÄƒn hÃ³a (Pinyin bá»‹ áº©n - Báº¥m Ä‘á»ƒ xem)</h2>
            </div>

            <!-- Filter Buttons -->
            <div class="flex flex-wrap justify-center gap-2 mb-8 sticky top-20 z-40 bg-white py-2 shadow-sm">
                <button onclick="filterVocab('all')" class="px-3 py-1 rounded-full bg-rose-600 text-white text-xs hover:bg-rose-700 shadow transition">Táº¥t cáº£</button>
                <button onclick="filterVocab('trade')" class="px-3 py-1 rounded-full bg-white text-rose-600 border border-rose-200 text-xs hover:bg-rose-50 shadow transition">Giao dá»‹ch</button>
                <button onclick="filterVocab('basic_fruit')" class="px-3 py-1 rounded-full bg-white text-rose-600 border border-rose-200 text-xs hover:bg-rose-50 shadow transition">TrÃ¡i cÃ¢y cÆ¡ báº£n</button>
                <button onclick="filterVocab('tropical')" class="px-3 py-1 rounded-full bg-white text-rose-600 border border-rose-200 text-xs hover:bg-rose-50 shadow transition">TrÃ¡i cÃ¢y nhiá»‡t Ä‘á»›i</button>
                <button onclick="filterVocab('other_fruit')" class="px-3 py-1 rounded-full bg-white text-rose-600 border border-rose-200 text-xs hover:bg-rose-50 shadow transition">TrÃ¡i cÃ¢y khÃ¡c</button>
            </div>

            <!-- Flashcards Container -->
            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4" id="flashcard-container">
                <!-- Cards will be rendered here by JS -->
            </div>
        </div>
    </section>

    <!-- PHáº¦N 3: NGá»® PHÃP (GRAMMAR) -->
    <section id="grammar" class="py-12 container mx-auto px-4">
        <div class="flex items-center mb-6">
            <div class="bg-rose-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold mr-3">3</div>
            <h2 class="text-2xl font-bold text-rose-800">Ngá»¯ phÃ¡p trá»ng Ä‘iá»ƒm</h2>
        </div>

        <div class="grid md:grid-cols-2 gap-6">
            <!-- Asking Price -->
            <div class="grammar-box">
                <h3 class="text-lg font-bold text-rose-700 mb-2"><i class="fas fa-comment-dots mr-2"></i>1. CÃ¡ch há»i giÃ¡ tiá»n</h3>
                <ul class="list-disc list-inside space-y-3 text-slate-700">
                    <li>
                        <strong>Cáº¥u trÃºc chuáº©n:</strong><br>
                        <span class="cn-text text-xl ml-4 text-rose-600">... å¤šå°‘é’±ä¸€æ–¤ï¼Ÿ</span><br>
                        <span class="text-sm text-gray-500 ml-4">... duÅshao qiÃ¡n yÃ¬ jÄ«n? (... bao nhiÃªu tiá»n 1 cÃ¢n?)</span>
                    </li>
                    <li>
                        <strong>Kháº©u ngá»¯ (Ngáº¯n gá»n):</strong><br>
                        <span class="cn-text text-xl ml-4 text-rose-600">... æ€ä¹ˆå–ï¼Ÿ</span><br>
                        <span class="text-sm text-gray-500 ml-4">... zÄ›nme mÃ i? (... bÃ¡n tháº¿ nÃ o?)</span>
                    </li>
                </ul>
            </div>

            <!-- Bargaining -->
            <div class="grammar-box border-blue-500">
                <h3 class="text-lg font-bold text-blue-700 mb-2"><i class="fas fa-hand-holding-dollar mr-2"></i>2. CÃ¡ch máº·c cáº£ (Bargaining)</h3>
                <div class="space-y-3">
                    <div class="bg-blue-50 p-2 rounded">
                        <p class="font-bold text-sm text-blue-800">BÆ°á»›c 1: ChÃª Ä‘áº¯t</p>
                        <p class="cn-text text-lg text-blue-600">å¤ªè´µäº†ï¼(TÃ i guÃ¬ le!)</p>
                    </div>
                    <div class="bg-blue-50 p-2 rounded">
                        <p class="font-bold text-sm text-blue-800">BÆ°á»›c 2: Äá» nghá»‹ giáº£m giÃ¡</p>
                        <p class="cn-text text-lg text-blue-600">ä¾¿å®œç‚¹å„¿å§ï¼(PiÃ¡nyi diÇnr ba!)</p>
                    </div>
                </div>
            </div>

            <!-- Units -->
            <div class="grammar-box border-yellow-500">
                <h3 class="text-lg font-bold text-yellow-700 mb-2"><i class="fas fa-balance-scale mr-2"></i>3. ÄÆ¡n vá»‹ Ä‘o lÆ°á»ng & Tiá»n tá»‡</h3>
                <ul class="grid grid-cols-2 gap-2 text-sm">
                    <li class="bg-yellow-50 p-2 rounded border border-yellow-200">
                        <span class="cn-text text-lg font-bold text-yellow-800">å— (KuÃ i)</span><br>Äá»“ng (Tá»‡)
                    </li>
                    <li class="bg-yellow-50 p-2 rounded border border-yellow-200">
                        <span class="cn-text text-lg font-bold text-yellow-800">æ¯› (MÃ¡o)</span><br>HÃ o (1/10 Tá»‡)
                    </li>
                    <li class="bg-yellow-50 p-2 rounded border border-yellow-200">
                        <span class="cn-text text-lg font-bold text-yellow-800">æ–¤ (JÄ«n)</span><br>0.5 kg (CÃ¢n TQ)
                    </li>
                    <li class="bg-yellow-50 p-2 rounded border border-yellow-200">
                        <span class="cn-text text-lg font-bold text-yellow-800">å…¬æ–¤ (GÅngjÄ«n)</span><br>1 kg (CÃ¢n tÃ¢y)
                    </li>
                </ul>
            </div>
            
            <!-- Adverb Hai -->
            <div class="grammar-box border-green-500">
                <h3 class="text-lg font-bold text-green-700 mb-2"><i class="fas fa-plus-circle mr-2"></i>4. Tráº¡ng tá»« "è¿˜" (HÃ¡i)</h3>
                <p class="text-sm mb-2">DÃ¹ng Ä‘á»ƒ há»i hoáº·c yÃªu cáº§u thÃªm cÃ¡i gÃ¬ Ä‘Ã³.</p>
                <p class="cn-text text-xl text-green-600 text-center bg-green-50 p-2 rounded">è¿˜è¦åˆ«çš„å—ï¼Ÿ</p>
                <p class="text-center text-sm text-gray-500">HÃ¡i yÃ o biÃ©de ma? (CÃ²n muá»‘n cÃ¡i khÃ¡c khÃ´ng?)</p>
            </div>
        </div>
    </section>

    <!-- PHáº¦N 4: Äá»ŒC HIá»‚U (READING) -->
    <section id="reading" class="py-12 bg-white border-t border-rose-100">
        <div class="container mx-auto px-4">
            <div class="flex items-center mb-6">
                <div class="bg-rose-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold mr-3">4</div>
                <h2 class="text-2xl font-bold text-rose-800">Äá»c hiá»ƒu: Äi siÃªu thá»‹ ngÃ y Chá»§ nháº­t</h2>
            </div>

            <div class="bg-rose-50 p-6 rounded-xl shadow-inner mb-8 relative">
                <!-- Pinyin Toggle -->
                <div class="absolute top-4 right-4">
                    <label class="flex items-center cursor-pointer select-none">
                        <span class="mr-2 text-sm font-medium text-rose-700">Hiá»‡n Pinyin</span>
                        <input type="checkbox" id="toggle-pinyin" class="sr-only" onchange="togglePinyin()">
                        <div class="w-11 h-6 bg-gray-200 rounded-full relative transition-colors duration-200 ease-in-out toggle-bg">
                            <div class="dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition transform duration-200 ease-in-out"></div>
                        </div>
                    </label>
                </div>

                <div class="prose max-w-none">
                    <p class="text-xl leading-loose mb-4 text-slate-800">
                        <span class="cn-text">ä»Šå¤©æ˜¯æ˜ŸæœŸå¤©ï¼Œæˆ‘å»è¶…å¸‚ä¹°æ°´æœã€‚</span>
                        <span class="pinyin hidden block text-sm text-rose-600 mb-2">JÄ«ntiÄn shÃ¬ XÄ«ngqÄ«tiÄn, wÇ’ qÃ¹ chÄoshÃ¬ mÇi shuÇguÇ’.</span>
                        
                        <span class="cn-text">è¶…å¸‚é‡Œçš„æ°´æœå¾ˆå¤šã€‚æœ‰<span class="highlight">è‹¹æœ</span>ã€<span class="highlight">é¦™è•‰</span>ã€<span class="highlight">è‘¡è„</span>ï¼Œè¿˜æœ‰<span class="highlight">æ¦´è²</span>å’Œ<span class="highlight">å±±ç«¹</span>ã€‚</span>
                        <span class="pinyin hidden block text-sm text-rose-600 mb-2">ChÄoshÃ¬ lÇ de shuÇguÇ’ hÄ›n duÅ. YÇ’u pÃ­ngguÇ’, xiÄngjiÄo, pÃºtÃ¡o, hÃ¡i yÇ’u liÃºliÃ¡n hÃ© shÄnzhÃº.</span>

                        <span class="cn-text">è‹¹æœä¸‰å—é’±ä¸€æ–¤ï¼Œé¦™è•‰ä¸¤å—äº”ã€‚æˆ‘è§‰å¾—è‹¹æœå¾ˆ<span class="highlight">ä¾¿å®œ</span>ï¼Œä½†æ˜¯æ¦´è²<span class="highlight">å¤ªè´µäº†</span>ï¼Œäº”åå—ä¸€æ–¤ï¼</span>
                        <span class="pinyin hidden block text-sm text-rose-600 mb-2">PÃ­ngguÇ’ sÄn kuÃ i qiÃ¡n yÃ¬ jÄ«n, xiÄngjiÄo liÇng kuÃ i wÇ”. WÇ’ juÃ©de pÃ­ngguÇ’ hÄ›n piÃ¡nyi, dÃ nshÃ¬ liÃºliÃ¡n tÃ i guÃ¬ le, wÇ”shÃ­ kuÃ i yÃ¬ jÄ«n!</span>

                        <span class="cn-text">æˆ‘ä¹°äº†äº”æ–¤è‹¹æœå’Œä¸¤æ–¤é¦™è•‰ã€‚æˆ‘è¿˜è¦äº†ä¸€ç“¶å•¤é…’ã€‚</span>
                        <span class="pinyin hidden block text-sm text-rose-600 mb-2">WÇ’ mÇi le wÇ” jÄ«n pÃ­ngguÇ’ hÃ© liÇng jÄ«n xiÄngjiÄo. WÇ’ hÃ¡i yÃ o le yÃ¬ pÃ­ng pÃ­jiÇ”.</span>

                        <span class="cn-text">ä¸€å…±äºŒåäº”å—é’±ã€‚æˆ‘ç»™å”®è´§å‘˜äº”åå—ï¼Œå¥¹æ‰¾æˆ‘äºŒåäº”å—ã€‚</span>
                        <span class="pinyin hidden block text-sm text-rose-600 mb-2">YÃ­gÃ²ng Ã¨rshÃ­ wÇ” kuÃ i qiÃ¡n. WÇ’ gÄ›i shÃ²uhuÃ²yuÃ¡n wÇ”shÃ­ kuÃ i, tÄ zhÇo wÇ’ Ã¨rshÃ­ wÇ” kuÃ i.</span>
                    </p>
                </div>
            </div>

            <!-- Comprehension Quiz -->
            <div class="grid md:grid-cols-3 gap-6">
                <div class="bg-white border rounded-lg p-4 shadow-sm hover:shadow-md transition">
                    <h4 class="font-bold text-rose-700 mb-2">1. TÃ­nh toÃ¡n (Calculation)</h4>
                    <p class="text-sm mb-3">NhÃ¢n váº­t chÃ­nh mua háº¿t bao nhiÃªu tiá»n hoa quáº£?</p>
                    <div class="space-y-2 text-sm">
                        <button onclick="checkQuiz(this, false)" class="w-full text-left p-2 border rounded hover:bg-gray-50">A. 25 tá»‡</button>
                        <button onclick="checkQuiz(this, true)" class="w-full text-left p-2 border rounded hover:bg-gray-50">B. 20 tá»‡ (5x3 + 2x2.5)</button>
                        <button onclick="checkQuiz(this, false)" class="w-full text-left p-2 border rounded hover:bg-gray-50">C. 50 tá»‡</button>
                    </div>
                </div>
                <div class="bg-white border rounded-lg p-4 shadow-sm hover:shadow-md transition">
                    <h4 class="font-bold text-rose-700 mb-2">2. TÆ° duy Logic</h4>
                    <p class="text-sm mb-3">Táº¡i sao tá»•ng tiá»n lÃ  25 tá»‡ mÃ  tiá»n hoa quáº£ chá»‰ cÃ³ 20 tá»‡?</p>
                    <div class="space-y-2 text-sm">
                        <button onclick="checkQuiz(this, false)" class="w-full text-left p-2 border rounded hover:bg-gray-50">A. NgÆ°á»i bÃ¡n tÃ­nh sai</button>
                        <button onclick="checkQuiz(this, true)" class="w-full text-left p-2 border rounded hover:bg-gray-50">B. VÃ¬ mua thÃªm 1 chai bia</button>
                        <button onclick="checkQuiz(this, false)" class="w-full text-left p-2 border rounded hover:bg-gray-50">C. Tiá»n tÃºi nilon</button>
                    </div>
                </div>
                <div class="bg-white border rounded-lg p-4 shadow-sm hover:shadow-md transition">
                    <h4 class="font-bold text-rose-700 mb-2">3. Suy luáº­n (Inference)</h4>
                    <p class="text-sm mb-3">Táº¡i sao nhÃ¢n váº­t tháº¥y sáº§u riÃªng Ä‘áº¯t?</p>
                    <div class="space-y-2 text-sm">
                        <button onclick="checkQuiz(this, false)" class="w-full text-left p-2 border rounded hover:bg-gray-50">A. VÃ¬ nÃ³ khÃ´ng ngon</button>
                        <button onclick="checkQuiz(this, false)" class="w-full text-left p-2 border rounded hover:bg-gray-50">B. VÃ¬ chá»‰ cÃ³ 3 tá»‡ má»™t cÃ¢n</button>
                        <button onclick="checkQuiz(this, true)" class="w-full text-left p-2 border rounded hover:bg-gray-50">C. VÃ¬ giÃ¡ 50 tá»‡/cÃ¢n</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- PHáº¦N 5: THá»°C HÃ€NH (PRACTICE) -->
    <section id="practice" class="py-12 container mx-auto px-4 bg-rose-50">
        <div class="flex items-center mb-6">
            <div class="bg-rose-600 text-white w-10 h-10 rounded-full flex items-center justify-center font-bold mr-3">5</div>
            <h2 class="text-2xl font-bold text-rose-800">Thá»±c hÃ nh: Vua Máº·c Cáº£ & Nháº­n diá»‡n mÃ³n Äƒn</h2>
        </div>

        <div class="grid lg:grid-cols-2 gap-8">
            <!-- Activity 1: Bargaining Simulator -->
            <div class="bg-white p-6 rounded-xl shadow-lg border border-rose-100">
                <h3 class="text-xl font-bold text-slate-700 mb-4 text-center">ğŸ›’ TrÃ² chÆ¡i: Vua Máº·c Cáº£ (Bargaining King)</h3>
                <p class="text-sm text-gray-500 mb-4 text-center">Báº¡n muá»‘n mua <strong class="text-rose-600">Sáº§u riÃªng (LiÃºliÃ¡n)</strong>. GiÃ¡ gá»‘c: <span class="line-through">80 Tá»‡/cÃ¢n</span>. HÃ£y máº·c cáº£ xuá»‘ng 50 Tá»‡!</p>
                
                <div id="chat-box" class="h-64 overflow-y-auto bg-gray-50 rounded p-4 mb-4 border border-gray-200">
                    <div class="mb-2 text-left"><span class="bg-gray-200 py-1 px-3 rounded-lg inline-block text-sm">è€æ¿ (Chá»§ quÃ¡n): NÃ­n yÃ o shÃ©nme? (Báº¡n muá»‘n gÃ¬?)</span></div>
                </div>

                <div class="grid grid-cols-1 gap-2">
                    <button onclick="playerChat('WÇ’ yÃ o liÃºliÃ¡n. ZÄ›nme mÃ i?')" class="text-left p-2 border rounded hover:bg-rose-50 text-sm transition">A. WÇ’ yÃ o liÃºliÃ¡n. ZÄ›nme mÃ i? (TÃ´i láº¥y sáº§u riÃªng. BÃ¡n tháº¿ nÃ o?)</button>
                    <button onclick="playerChat('TÃ i guÃ¬ le! PiÃ¡nyi diÇnr ba!')" class="text-left p-2 border rounded hover:bg-rose-50 text-sm hidden transition" id="opt-bargain">B. TÃ i guÃ¬ le! PiÃ¡nyi diÇnr ba! (Äáº¯t quÃ¡! Ráº» chÃºt Ä‘i!)</button>
                    <button onclick="playerChat('WÇ”shÃ­ kuÃ i, xÃ­ng bu xÃ­ng?')" class="text-left p-2 border rounded hover:bg-rose-50 text-sm hidden transition" id="opt-price">C. WÇ”shÃ­ kuÃ i, xÃ­ng bu xÃ­ng? (50 tá»‡, Ä‘Æ°á»£c khÃ´ng?)</button>
                </div>
                <button onclick="resetChat()" class="mt-4 text-xs text-gray-400 underline w-full text-center hover:text-rose-500">ChÆ¡i láº¡i</button>
            </div>

            <!-- Activity 2: Food Identification Quiz -->
            <div class="bg-white p-6 rounded-xl shadow-lg border border-blue-100">
                <h3 class="text-xl font-bold text-slate-700 mb-4 text-center">ğŸ½ï¸ Nháº­n diá»‡n mÃ³n Äƒn</h3>
                <div id="food-quiz-container" class="text-center">
                    <!-- Content injected by JS -->
                </div>
                <div id="food-feedback" class="h-8 text-center font-bold mt-2"></div>
                <div class="flex justify-center gap-2 mt-4">
                    <button onclick="loadFoodQuiz(0)" class="w-3 h-3 rounded-full bg-gray-300 quiz-dot"></button>
                    <button onclick="loadFoodQuiz(1)" class="w-3 h-3 rounded-full bg-gray-300 quiz-dot"></button>
                    <button onclick="loadFoodQuiz(2)" class="w-3 h-3 rounded-full bg-gray-300 quiz-dot"></button>
                    <button onclick="loadFoodQuiz(3)" class="w-3 h-3 rounded-full bg-gray-300 quiz-dot"></button>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER: HOMEWORK -->
    <footer class="bg-slate-800 text-white py-10 mt-12">
        <div class="container mx-auto px-4">
            <h3 class="text-xl font-bold text-rose-400 mb-4 text-center"><i class="fas fa-pen-fancy mr-2"></i>BÃ i táº­p vá» nhÃ  (Homework)</h3>
            <div class="grid md:grid-cols-3 gap-6 max-w-4xl mx-auto text-sm">
                <div class="bg-slate-700 p-4 rounded-lg border border-slate-600">
                    <h4 class="font-bold text-white mb-2 text-lg">1. SÃ¡ng táº¡o</h4>
                    <p class="text-slate-300">Thiáº¿t káº¿ má»™t "Thá»±c Ä‘Æ¡n trÃ¡i cÃ¢y" cho cá»­a hÃ ng cá»§a báº¡n, bao gá»“m tÃªn 5 loáº¡i quáº£ (báº±ng chá»¯ HÃ¡n) vÃ  giÃ¡ tiá»n.</p>
                </div>
                <div class="bg-slate-700 p-4 rounded-lg border border-slate-600">
                    <h4 class="font-bold text-white mb-2 text-lg">2. Ghi Ã¢m</h4>
                    <p class="text-slate-300">Äá»c to Ä‘oáº¡n vÄƒn "Äi siÃªu thá»‹ ngÃ y Chá»§ nháº­t" á»Ÿ Pháº§n 4. ChÃº Ã½ biáº¿n Ä‘iá»‡u cá»§a "YÄ«" vÃ  "BÃ¹".</p>
                </div>
                <div class="bg-slate-700 p-4 rounded-lg border border-slate-600">
                    <h4 class="font-bold text-white mb-2 text-lg">3. NghiÃªn cá»©u</h4>
                    <p class="text-slate-300">TÃ¬m hiá»ƒu xem 1 Tá»‡ (KuÃ i) hÃ´m nay Ä‘á»•i Ä‘Æ°á»£c bao nhiÃªu tiá»n Viá»‡t? Váº­y 1 cÃ¢n (JÄ«n) tÃ¡o 3 tá»‡ lÃ  Ä‘áº¯t hay ráº»?</p>
                </div>
            </div>
            <div class="text-center mt-8 text-xs text-slate-500">
                GiÃ¡o Ã¡n Ä‘iá»‡n tá»­ HÃ¡n ngá»¯ 1 - BÃ i 8 | Updated with Hidden Pinyin
            </div>
        </div>
    </footer>

    <script>
        /* --- 1. VOCABULARY DATA (REFINED EXAMPLES) --- */
        const vocabList = [
            // Giao dá»‹ch
            { h: 'ä¹°', p: 'MÇi', m: 'Mua', type: 'trade', icon: 'ğŸ¤', ex: { hz: 'æˆ‘è¦å»è¶…å¸‚ä¹°æ°´æœã€‚', py: 'WÇ’ yÃ o qÃ¹ chÄoshÃ¬ mÇi shuÇguÇ’.', mn: 'TÃ´i muá»‘n Ä‘i siÃªu thá»‹ mua hoa quáº£.' } },
            { h: 'å–', p: 'MÃ i', m: 'BÃ¡n', type: 'trade', icon: 'ğŸª', ex: { hz: 'è¯·é—®ï¼Œè¿™ä¸ªè‹¹æœæ€ä¹ˆå–ï¼Ÿ', py: 'QÇngwÃ¨n, zhÃ¨ge pÃ­ngguÇ’ zÄ›nme mÃ i?', mn: 'Xin há»i, tÃ¡o nÃ y bÃ¡n tháº¿ nÃ o?' } },
            { h: 'å¤šå°‘', p: 'DuÅshao', m: 'Bao nhiÃªu', type: 'trade', icon: 'â“', ex: { hz: 'ä½ çŸ¥é“è¿™ä»¶è¡£æœå¤šå°‘é’±å—ï¼Ÿ', py: 'NÇ zhÄ«dÃ o zhÃ¨ jiÃ n yÄ«fu duÅshao qiÃ¡n ma?', mn: 'Báº¡n biáº¿t bá»™ quáº§n Ã¡o nÃ y bao nhiÃªu tiá»n khÃ´ng?' } },
            { h: 'é’±', p: 'QiÃ¡n', m: 'Tiá»n', type: 'trade', icon: 'ğŸ’°', ex: { hz: 'æˆ‘æ²¡æœ‰é’±ï¼Œä¸èƒ½ä¹°ä¸œè¥¿ã€‚', py: 'WÇ’ mÃ©iyÇ’u qiÃ¡n, bÃ¹ nÃ©ng mÇi dÅngxi.', mn: 'TÃ´i khÃ´ng cÃ³ tiá»n, khÃ´ng thá»ƒ mua Ä‘á»“.' } },
            { h: 'å—', p: 'KuÃ i', m: 'Äá»“ng (Tá»‡)', type: 'trade', icon: 'ğŸ’´', ex: { hz: 'è¿™æœ¬ä¹¦äº”åå—é’±ã€‚', py: 'ZhÃ¨ bÄ›n shÅ« wÇ”shÃ­ kuÃ i qiÃ¡n.', mn: 'Quyá»ƒn sÃ¡ch nÃ y 50 tá»‡.' } },
            { h: 'æ¯›', p: 'MÃ¡o', m: 'HÃ o', type: 'trade', icon: 'ğŸª™', ex: { hz: 'è¿˜å·®äº”æ¯›é’±ã€‚', py: 'HÃ¡i chÃ  wÇ” mÃ¡o qiÃ¡n.', mn: 'Váº«n cÃ²n thiáº¿u 5 hÃ o.' } },
            { h: 'æ–¤', p: 'JÄ«n', m: 'CÃ¢n (0.5kg)', type: 'trade', icon: 'âš–ï¸', ex: { hz: 'æˆ‘æƒ³ä¹°ä¸¤æ–¤é¦™è•‰ã€‚', py: 'WÇ’ xiÇng mÇi liÇng jÄ«n xiÄngjiÄo.', mn: 'TÃ´i muá»‘n mua 2 cÃ¢n chuá»‘i.' } },
            { h: 'ç»™', p: 'GÄ›i', m: 'ÄÆ°a/Cho', type: 'trade', icon: 'ğŸ¤²', ex: { hz: 'è¿™æ˜¯ä½ çš„é’±ï¼Œç»™ä½ ã€‚', py: 'ZhÃ¨ shÃ¬ nÇ de qiÃ¡n, gÄ›i nÇ.', mn: 'ÄÃ¢y lÃ  tiá»n cá»§a báº¡n, Ä‘Æ°a báº¡n nÃ y.' } },
            { h: 'æ‰¾', p: 'ZhÇo', m: 'Thá»‘i láº¡i', type: 'trade', icon: 'ğŸ”„', ex: { hz: 'è¿™æ˜¯100å—ï¼Œæ‰¾æ‚¨20å—ã€‚', py: 'ZhÃ¨ shÃ¬ yÄ«bÇi kuÃ i, zhÇo nÃ­n Ã¨rshÃ­ kuÃ i.', mn: 'ÄÃ¢y lÃ  100 tá»‡, thá»‘i láº¡i ngÃ i 20 tá»‡.' } },
            { h: 'è¿˜', p: 'HÃ¡i', m: 'CÃ²n/Váº«n', type: 'trade', icon: 'â•', ex: { hz: 'ä½ è¿˜è¦ä¹°åˆ«çš„ä¸œè¥¿å—ï¼Ÿ', py: 'NÇ hÃ¡i yÃ o mÇi biÃ© de dÅngxi ma?', mn: 'Báº¡n cÃ²n muá»‘n mua Ä‘á»“ khÃ¡c khÃ´ng?' } },
            { h: 'ä¸€å…±', p: 'YÃ­gÃ²ng', m: 'Tá»•ng cá»™ng', type: 'trade', icon: 'âˆ‘', ex: { hz: 'è¿™äº›æ°´æœä¸€å…±å¤šå°‘é’±ï¼Ÿ', py: 'ZhÃ¨xiÄ“ shuÇguÇ’ yÃ­gÃ²ng duÅshao qiÃ¡n?', mn: 'Nhá»¯ng loáº¡i hoa quáº£ nÃ y tá»•ng cá»™ng bao nhiÃªu tiá»n?' } },

            // TrÃ¡i cÃ¢y cÆ¡ báº£n
            { h: 'è‹¹æœ', p: 'PÃ­ngguÇ’', m: 'TÃ¡o', type: 'basic_fruit', icon: 'ğŸ', ex: { hz: 'æˆ‘æ¯å¤©åƒä¸€ä¸ªè‹¹æœã€‚', py: 'WÇ’ mÄ›itiÄn chÄ« yÃ­ gÃ¨ pÃ­ngguÇ’.', mn: 'TÃ´i má»—i ngÃ y Äƒn má»™t quáº£ tÃ¡o.' } },
            { h: 'é¦™è•‰', p: 'XiÄngjiÄo', m: 'Chuá»‘i', type: 'basic_fruit', icon: 'ğŸŒ', ex: { hz: 'è¿™ç§é¦™è•‰éå¸¸ç”œã€‚', py: 'ZhÃ¨ zhÇ’ng xiÄngjiÄo fÄ“ichÃ¡ng tiÃ¡n.', mn: 'Loáº¡i chuá»‘i nÃ y ráº¥t ngá»t.' } },
            { h: 'è‘¡è„', p: 'PÃºtÃ¡o', m: 'Nho', type: 'basic_fruit', icon: 'ğŸ‡', ex: { hz: 'ç°åœ¨çš„è‘¡è„å¾ˆä¾¿å®œã€‚', py: 'XiÃ nzÃ i de pÃºtÃ¡o hÄ›n piÃ¡nyi.', mn: 'Nho bÃ¢y giá» ráº¥t ráº».' } },
            { h: 'è¥¿ç“œ', p: 'XÄ«guÄ', m: 'DÆ°a háº¥u', type: 'basic_fruit', icon: 'ğŸ‰', ex: { hz: 'å¤å¤©åƒè¥¿ç“œå¾ˆèˆ’æœã€‚', py: 'XiÃ tiÄn chÄ« xÄ«guÄ hÄ›n shÅ«fu.', mn: 'MÃ¹a hÃ¨ Äƒn dÆ°a háº¥u ráº¥t thoáº£i mÃ¡i.' } },
            { h: 'è‰è“', p: 'CÇomÃ©i', m: 'DÃ¢u tÃ¢y', type: 'basic_fruit', icon: 'ğŸ“', ex: { hz: 'æˆ‘æœ€å–œæ¬¢åƒè‰è“ã€‚', py: 'WÇ’ zuÃ¬ xÇhuan chÄ« cÇomÃ©i.', mn: 'TÃ´i thÃ­ch Äƒn dÃ¢u tÃ¢y nháº¥t.' } },
            { h: 'æ¢¨', p: 'LÃ­', m: 'LÃª', type: 'basic_fruit', icon: 'ğŸ', ex: { hz: 'å¦ˆå¦ˆä¹°äº†ä¸€äº›æ¢¨ã€‚', py: 'MÄma mÇi le yÃ¬xiÄ“ lÃ­.', mn: 'Máº¹ Ä‘Ã£ mua má»™t Ã­t lÃª.' } },
            { h: 'æ¡ƒå­', p: 'TÃ¡ozi', m: 'ÄÃ o', type: 'basic_fruit', icon: 'ğŸ‘', ex: { hz: 'è¿™äº›æ¡ƒå­çœ‹èµ·æ¥å¾ˆå¥½åƒã€‚', py: 'ZhÃ¨xiÄ“ tÃ¡ozi kÃ n qÇlÃ¡i hÄ›n hÇochÄ«.', mn: 'Nhá»¯ng quáº£ Ä‘Ã o nÃ y trÃ´ng ráº¥t ngon.' } },
            { h: 'æ©˜å­', p: 'JÃºzi', m: 'QuÃ½t', type: 'basic_fruit', icon: 'ğŸŠ', ex: { hz: 'ä½ æƒ³åƒæ©˜å­å—ï¼Ÿ', py: 'NÇ xiÇng chÄ« jÃºzi ma?', mn: 'Báº¡n cÃ³ muá»‘n Äƒn quÃ½t khÃ´ng?' } },
            { h: 'æ©™å­', p: 'ChÃ©ngzi', m: 'Cam', type: 'basic_fruit', icon: 'ğŸŸ ', ex: { hz: 'æˆ‘å–äº†ä¸€æ¯æ©™æ±ã€‚', py: 'WÇ’ hÄ“ le yÃ¬ bÄ“i chÃ©ngzhÄ«.', mn: 'TÃ´i Ä‘Ã£ uá»‘ng má»™t ly nÆ°á»›c cam.' } },
            
            // TrÃ¡i cÃ¢y nhiá»‡t Ä‘á»›i & Má»Ÿ rá»™ng
            { h: 'èŠ’æœ', p: 'MÃ¡ngguÇ’', m: 'XoÃ i', type: 'tropical', icon: 'ğŸ¥­', ex: { hz: 'æˆ‘å–œæ¬¢å–èŠ’æœæ±ã€‚', py: 'WÇ’ xÇhuan hÄ“ mÃ¡ngguÇ’ zhÄ«.', mn: 'TÃ´i thÃ­ch uá»‘ng nÆ°á»›c xoÃ i.' } },
            { h: 'æ¦´è²', p: 'LiÃºliÃ¡n', m: 'Sáº§u riÃªng', type: 'tropical', icon: 'ğŸˆ', ex: { hz: 'å¾ˆå¤šäººä¸å–œæ¬¢æ¦´è²çš„å‘³é“ã€‚', py: 'HÄ›n duÅ rÃ©n bÃ¹ xÇhuan liÃºliÃ¡n de wÃ¨idÃ o.', mn: 'Ráº¥t nhiá»u ngÆ°á»i khÃ´ng thÃ­ch mÃ¹i sáº§u riÃªng.' } },
            { h: 'å±±ç«¹', p: 'ShÄnzhÃº', m: 'MÄƒng cá»¥t', type: 'tropical', icon: 'ğŸŸ£', ex: { hz: 'å±±ç«¹æ˜¯æ°´æœçš‡åã€‚', py: 'ShÄnzhÃº shÃ¬ shuÇguÇ’ huÃ¡nghÃ²u.', mn: 'MÄƒng cá»¥t lÃ  ná»¯ hoÃ ng trÃ¡i cÃ¢y.' } },
            { h: 'è è', p: 'BÅluÃ³', m: 'Dá»©a (ThÆ¡m)', type: 'tropical', icon: 'ğŸ', ex: { hz: 'è èé…¸é…¸ç”œç”œçš„ã€‚', py: 'BÅluÃ³ suÄnsuÄn tiÃ¡ntiÃ¡n de.', mn: 'Dá»©a chua chua ngá»t ngá»t.' } },
            { h: 'è”æ', p: 'LÃ¬zhÄ«', m: 'Váº£i', type: 'tropical', icon: 'ğŸ’', ex: { hz: 'è¿™ç§è”æå¾ˆæ–°é²œã€‚', py: 'ZhÃ¨ zhÇ’ng lÃ¬zhÄ« hÄ›n xÄ«nxiÄn.', mn: 'Loáº¡i váº£i nÃ y ráº¥t tÆ°Æ¡i.' } },
            { h: 'é¾™çœ¼', p: 'LÃ³ngyÇn', m: 'NhÃ£n', type: 'tropical', icon: 'ğŸ‘€', ex: { hz: 'é¾™çœ¼ä¹Ÿå¾ˆç”œã€‚', py: 'LÃ³ngyÇn yÄ› hÄ›n tiÃ¡n.', mn: 'NhÃ£n cÅ©ng ráº¥t ngá»t.' } },
            { h: 'ç«é¾™æœ', p: 'HuÇ’lÃ³ngguÇ’', m: 'Thanh long', type: 'tropical', icon: 'ğŸ²', ex: { hz: 'ä½ åƒè¿‡çº¢è‰²çš„ç«é¾™æœå—ï¼Ÿ', py: 'NÇ chÄ« guÃ² hÃ³ngsÃ¨ de huÇ’lÃ³ngguÇ’ ma?', mn: 'Báº¡n Ä‘Ã£ Äƒn thanh long ruá»™t Ä‘á» bao giá» chÆ°a?' } },
            { h: 'è èèœœ', p: 'BÅluÃ³mÃ¬', m: 'MÃ­t', type: 'tropical', icon: 'ğŸˆ', ex: { hz: 'è èèœœå¾ˆå¤§ï¼Œä¹Ÿå¾ˆé‡ã€‚', py: 'BÅluÃ³mÃ¬ hÄ›n dÃ , yÄ› hÄ›n zhÃ²ng.', mn: 'MÃ­t ráº¥t to, cÅ©ng ráº¥t náº·ng.' } },
            { h: 'çº¢æ¯›ä¸¹', p: 'HÃ³ngmÃ¡odÄn', m: 'ChÃ´m chÃ´m', type: 'tropical', icon: 'ğŸ”´', ex: { hz: 'çº¢æ¯›ä¸¹çœ‹èµ·æ¥åƒè”æã€‚', py: 'HÃ³ngmÃ¡odÄn kÃ n qÇlÃ¡i xiÃ ng lÃ¬zhÄ«.', mn: 'ChÃ´m chÃ´m trÃ´ng giá»‘ng váº£i.' } },
            
            // TrÃ¡i cÃ¢y khÃ¡c
            { h: 'å“ˆå¯†ç“œ', p: 'HÄmÃ¬guÄ', m: 'DÆ°a lÆ°á»›i', type: 'other_fruit', icon: 'ğŸˆ', ex: { hz: 'å“ˆå¯†ç“œéå¸¸ç”œã€‚', py: 'HÄmÃ¬guÄ fÄ“ichÃ¡ng tiÃ¡n.', mn: 'DÆ°a lÆ°á»›i cá»±c ká»³ ngá»t.' } },
            { h: 'ç‰›å¥¶æœ', p: 'NiÃºnÇiguÇ’', m: 'VÃº sá»¯a', type: 'other_fruit', icon: 'ğŸ¼', ex: { hz: 'æˆ‘ä»æ¥æ²¡åƒè¿‡ç‰›å¥¶æœã€‚', py: 'WÇ’ cÃ³nglÃ¡i mÃ©i chÄ« guÃ² niÃºnÇiguÇ’.', mn: 'TÃ´i chÆ°a bao giá» Äƒn vÃº sá»¯a.' } },
            { h: 'æ¨±æ¡ƒ', p: 'YÄ«ngtÃ¡o', m: 'Cherry', type: 'other_fruit', icon: 'ğŸ’', ex: { hz: 'æ¨±æ¡ƒå¾ˆè´µï¼Œä½†æ˜¯å¾ˆå¥½åƒã€‚', py: 'YÄ«ngtÃ¡o hÄ›n guÃ¬, dÃ nshÃ¬ hÄ›n hÇochÄ«.', mn: 'Cherry ráº¥t Ä‘áº¯t nhÆ°ng ráº¥t ngon.' } },
            { h: 'æŸšå­', p: 'YÃ²uzi', m: 'BÆ°á»Ÿi', type: 'other_fruit', icon: 'ğŸŸ¢', ex: { hz: 'ä¸­ç§‹èŠ‚æˆ‘ä»¬åƒæŸšå­ã€‚', py: 'ZhÅngqiÅ« JiÃ© wÇ’men chÄ« yÃ²uzi.', mn: 'Trung thu chÃºng tÃ´i Äƒn bÆ°á»Ÿi.' } },
            { h: 'æœ¨ç“œ', p: 'MÃ¹guÄ', m: 'Äu Ä‘á»§', type: 'other_fruit', icon: 'ğŸ¥£', ex: { hz: 'æœ¨ç“œå¯¹èº«ä½“å¾ˆå¥½ã€‚', py: 'MÃ¹guÄ duÃ¬ shÄ“ntÇ hÄ›n hÇo.', mn: 'Äu Ä‘á»§ ráº¥t tá»‘t cho cÆ¡ thá»ƒ.' } },
            { h: 'äººå¿ƒæœ', p: 'RÃ©nxÄ«nguÇ’', m: 'Há»“ng xiÃªm', type: 'other_fruit', icon: 'ğŸ¥”', ex: { hz: 'äººå¿ƒæœå¾ˆç”œã€‚', py: 'RÃ©nxÄ«nguÇ’ hÄ›n tiÃ¡n.', mn: 'Há»“ng xiÃªm ráº¥t ngá»t.' } },
            { h: 'å¤§æ£', p: 'DÃ zÇo', m: 'TÃ¡o tÃ u', type: 'other_fruit', icon: 'ğŸŸ¤', ex: { hz: 'å¤§æ£å¯ä»¥æ³¡èŒ¶å–ã€‚', py: 'DÃ zÇo kÄ›yÇ pÃ o chÃ¡ hÄ“.', mn: 'TÃ¡o tÃ u cÃ³ thá»ƒ pha trÃ  uá»‘ng.' } },

            // MÃ³n Äƒn
            { h: 'çƒ¤é¸­', p: 'KÇoyÄ', m: 'Vá»‹t quay', type: 'food', icon: 'ğŸ—', ex: { hz: 'åŒ—äº¬çƒ¤é¸­éå¸¸æœ‰åã€‚', py: 'BÄ›ijÄ«ng kÇoyÄ fÄ“ichÃ¡ng yÇ’umÃ­ng.', mn: 'Vá»‹t quay Báº¯c Kinh ráº¥t ná»•i tiáº¿ng.' } },
            { h: 'ç«é”…', p: 'HuÇ’guÅ', m: 'Láº©u', type: 'food', icon: 'ğŸ¥˜', ex: { hz: 'å†¬å¤©æˆ‘ä»¬å–œæ¬¢åƒç«é”…ã€‚', py: 'DÅngtiÄn wÇ’men xÇhuan chÄ« huÇ’guÅ.', mn: 'MÃ¹a Ä‘Ã´ng chÃºng tÃ´i thÃ­ch Äƒn láº©u.' } },
            { h: 'é¥ºå­', p: 'JiÇozi', m: 'Sá»§i cáº£o', type: 'food', icon: 'ğŸ¥Ÿ', ex: { hz: 'ä¸­å›½äººè¿‡å¹´åƒé¥ºå­ã€‚', py: 'ZhÅngguÃ³ rÃ©n guÃ²niÃ¡n chÄ« jiÇozi.', mn: 'NgÆ°á»i Trung Quá»‘c Äƒn sá»§i cáº£o vÃ o dá»‹p táº¿t.' } },
            { h: 'é¢æ¡', p: 'MiÃ ntiÃ¡o', m: 'MÃ¬', type: 'food', icon: 'ğŸœ', ex: { hz: 'æˆ‘æƒ³åƒä¸€ç¢—ç‰›è‚‰é¢æ¡ã€‚', py: 'WÇ’ xiÇng chÄ« yÃ¬ wÇn niÃºrÃ²u miÃ ntiÃ¡o.', mn: 'TÃ´i muá»‘n Äƒn má»™t bÃ¡t mÃ¬ bÃ².' } }
        ];

        function filterVocab(type) {
            const container = document.getElementById('flashcard-container');
            container.innerHTML = '';
            vocabList.forEach(word => {
                if (type === 'all' || word.type === type) {
                    const card = document.createElement('div');
                    card.className = 'flip-card h-64 cursor-pointer perspective-1000';
                    card.innerHTML = `
                        <div class="flip-card-inner shadow-lg rounded-xl">
                            <div class="flip-card-front bg-white">
                                <div class="text-5xl mb-3">${word.icon}</div>
                                <div class="text-3xl font-bold text-rose-700 cn-text">${word.h}</div>
                                <div class="text-md text-slate-500 font-medium mt-2">
                                     <span class="pinyin-blur" onclick="togglePinyinCard(this)">${word.p}</span>
                                     <div class="reveal-hint">(Báº¥m Ä‘á»ƒ xem Pinyin)</div>
                                </div>
                            </div>
                            <div class="flip-card-back text-slate-800 flex flex-col justify-center relative">
                                <div class="font-bold text-xl mb-2 text-rose-900 relative">
                                    <span>${word.m}</span>
                                </div>
                                <div class="text-sm bg-white/70 p-3 rounded-lg w-11/12 mx-auto text-left">
                                    <p class="font-bold text-rose-700 text-xs mb-1">VÃ­ dá»¥:</p>
                                    <p class="cn-text text-lg text-rose-800 leading-snug">${word.ex.hz}</p>
                                    <p class="text-slate-600 text-xs mt-1">
                                         <span class="pinyin-blur" onclick="togglePinyinCard(this)">${word.ex.py}</span>
                                         <span class="reveal-hint">(Báº¥m)</span>
                                    </p>
                                    <p class="italic text-slate-500 text-xs mt-1">(${word.ex.mn})</p>
                                </div>
                            </div>
                        </div>
                    `;
                    // Prevent card flip when clicking on meaning/pinyin
                    const blurSpans = card.querySelectorAll('.pinyin-blur');
                    blurSpans.forEach(span => {
                        span.addEventListener('click', (e) => {
                            e.stopPropagation(); // Stop bubbling to card flip
                        });
                    });

                    // Only flip card if clicking outside meaning spans
                    card.addEventListener('click', function(e) {
                        if (!e.target.classList.contains('pinyin-blur') && !e.target.classList.contains('pinyin-revealed')) {
                            this.classList.toggle('flipped');
                        }
                    });
                    
                    container.appendChild(card);
                }
            });
        }
        
        function togglePinyinCard(element) {
            element.classList.add('pinyin-revealed');
            element.classList.remove('pinyin-blur');
        }

        filterVocab('all'); // Init

        /* --- 2. READING INTERACTION --- */
        function togglePinyin() {
            const pinyins = document.querySelectorAll('.pinyin');
            const check = document.getElementById('toggle-pinyin');
            const toggleBg = document.querySelector('.toggle-bg');
            const dot = document.querySelector('.dot');

            pinyins.forEach(el => el.classList.toggle('hidden'));
            
            if(check.checked) {
                toggleBg.classList.replace('bg-gray-200', 'bg-rose-500');
                dot.classList.add('translate-x-5');
            } else {
                toggleBg.classList.replace('bg-rose-500', 'bg-gray-200');
                dot.classList.remove('translate-x-5');
            }
        }

        function checkQuiz(btn, isCorrect) {
            // Reset styles for siblings
            const parent = btn.parentElement;
            Array.from(parent.children).forEach(child => {
                child.classList.remove('bg-green-100', 'border-green-500', 'bg-red-100', 'border-red-500');
                child.classList.add('hover:bg-gray-50');
            });

            if(isCorrect) {
                btn.classList.add('bg-green-100', 'border-green-500');
                btn.classList.remove('hover:bg-gray-50');
                btn.innerHTML += ' <span class="text-green-600 float-right">âœ”</span>';
            } else {
                btn.classList.add('bg-red-100', 'border-red-500');
                btn.classList.remove('hover:bg-gray-50');
                btn.innerHTML += ' <span class="text-red-600 float-right">âœ˜</span>';
            }
        }

        /* --- 3. BARGAINING GAME --- */
        const chatBox = document.getElementById('chat-box');
        let gameStep = 0;

        function playerChat(msg) {
            // Player msg
            chatBox.innerHTML += `<div class="mb-2 text-right"><span class="bg-rose-500 text-white py-2 px-4 rounded-2xl rounded-tr-none inline-block shadow-sm text-sm">${msg}</span></div>`;
            chatBox.scrollTop = chatBox.scrollHeight;

            // Bot response delay
            setTimeout(() => {
                let botMsg = "";
                if (msg.includes("ZÄ›nme mÃ i")) {
                    botMsg = "è€æ¿: 80 kuÃ i yÃ¬ jÄ«n. HÄ›n hÇochÄ«! (80 tá»‡/cÃ¢n. Ngon láº¯m!)";
                    document.getElementById('opt-bargain').classList.remove('hidden');
                } else if (msg.includes("TÃ i guÃ¬ le")) {
                    botMsg = "è€æ¿: NÃ ... liÃ¹shÃ­ kuÃ i ba. (Váº­y... 60 tá»‡ Ä‘i.)";
                    document.getElementById('opt-price').classList.remove('hidden');
                } else if (msg.includes("WÇ”shÃ­ kuÃ i")) {
                    botMsg = "è€æ¿: HÇo ba, gÄ›i nÇ! (ThÃ´i Ä‘Æ°á»£c, bÃ¡n cho báº¡n!) ğŸ‰";
                }
                
                chatBox.innerHTML += `<div class="mb-2 text-left"><span class="bg-gray-200 py-2 px-4 rounded-2xl rounded-tl-none inline-block text-slate-700 text-sm shadow-sm">${botMsg}</span></div>`;
                chatBox.scrollTop = chatBox.scrollHeight;
            }, 800);
        }

        function resetChat() {
            chatBox.innerHTML = `<div class="mb-2 text-left"><span class="bg-gray-200 py-2 px-4 rounded-2xl rounded-tl-none inline-block text-slate-700 text-sm shadow-sm">è€æ¿: NÃ­n yÃ o shÃ©nme? (Báº¡n muá»‘n gÃ¬?)</span></div>`;
            document.getElementById('opt-bargain').classList.add('hidden');
            document.getElementById('opt-price').classList.add('hidden');
        }

        /* --- 4. FOOD ID QUIZ --- */
        const foods = [
            { img: 'ğŸ¦†', name: 'KÇoyÄ (Vá»‹t quay)', correct: true, items: ['KÇoyÄ', 'HuÇ’guÅ', 'ShuÇjiÇo'] },
            { img: 'ğŸ²', name: 'HuÇ’guÅ (Láº©u)', correct: true, items: ['MÃ¡ntou', 'HuÇ’guÅ', 'MiÃ ntiÃ¡o'] },
            { img: 'ğŸ•', name: 'PÄ«sÃ  (Pizza)', correct: true, items: ['PÄ«sÃ ', 'HÃ nbÇo', 'BÄozi'] },
            { img: 'ğŸ”', name: 'HÃ nbÇo (Hamburger)', correct: true, items: ['JÄ«dÃ n', 'HÃ nbÇo', 'MÇfÃ n'] },
        ];
        
        function loadFoodQuiz(idx) {
            const container = document.getElementById('food-quiz-container');
            const data = foods[idx];
            
            // Update dots
            document.querySelectorAll('.quiz-dot').forEach((d, i) => {
                d.classList.toggle('bg-rose-600', i === idx);
                d.classList.toggle('bg-gray-300', i !== idx);
            });

            let html = `<div class="text-7xl mb-6 animate-bounce">${data.img}</div>
                        <div class="grid grid-cols-3 gap-3">`;
            
            data.items.forEach(item => {
                const isCorrect = item.includes(data.name.split(' ')[0]);
                html += `<button onclick="checkFood(this, ${isCorrect})" class="border-2 border-slate-200 p-3 rounded-xl hover:bg-blue-50 hover:border-blue-300 transition text-sm font-bold text-slate-700">${item}</button>`;
            });
            html += `</div>`;
            
            container.innerHTML = html;
            document.getElementById('food-feedback').innerText = '';
        }

        function checkFood(btn, isCorrect) {
            const fb = document.getElementById('food-feedback');
            if(isCorrect) {
                btn.classList.add('bg-green-500', 'text-white', 'border-green-600');
                btn.classList.remove('text-slate-700', 'hover:bg-blue-50');
                fb.innerText = "HÇochÄ«! (Ngon!) - ÄÃºng rá»“i âœ…";
                fb.className = "h-8 text-center font-bold mt-3 text-green-600 text-lg";
            } else {
                btn.classList.add('bg-red-500', 'text-white', 'border-red-600');
                btn.classList.remove('text-slate-700', 'hover:bg-blue-50');
                fb.innerText = "BÃ¹ duÃ¬! (Sai rá»“i) âŒ";
                fb.className = "h-8 text-center font-bold mt-3 text-red-600 text-lg";
            }
        }
        
        loadFoodQuiz(0); // Init

    </script>
</body>
</html>
