<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BÃ i Thi Giá»¯a Ká»³ Tiáº¿ng Trung - ç»ƒä¹  1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #fff1f2; /* Rose-50 */
            background-image: radial-gradient(#fecdd3 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .chinese-text {
            font-family: 'Noto Sans SC', sans-serif;
        }
        .cute-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }
        .cute-card:hover {
            transform: translateY(-2px);
        }
        .input-line {
            border: none;
            border-bottom: 2px dashed #cbd5e1;
            outline: none;
            padding: 0 5px;
            color: #db2777;
            text-align: center;
            background: transparent;
            transition: border-color 0.3s;
        }
        .input-line:focus {
            border-bottom: 2px solid #db2777;
        }
        /* Sticky Timer */
        .sticky-timer {
            position: sticky;
            top: 1rem;
            z-index: 50;
        }
        /* Result Mode Styles */
        .review-mode .hide-on-review {
            display: none;
        }
        .review-mode input, .review-mode textarea {
            border: 1px solid #e2e8f0;
            background-color: #f8fafc;
            pointer-events: none; /* Lock inputs */
        }
        .correct-answer {
            color: #16a34a;
            font-weight: bold;
            font-size: 0.9em;
            margin-top: 5px;
            display: none;
        }
        .review-mode .correct-answer {
            display: block;
        }
        .feedback-icon {
            display: none;
            margin-left: 8px;
        }
        .review-mode .feedback-icon {
            display: inline-block;
        }
    </style>
</head>
<body class="pb-20">

    <!-- Header & Timer -->
    <div class="max-w-3xl mx-auto p-4">
        <div class="sticky-timer flex justify-between items-center bg-white/90 backdrop-blur-sm p-4 rounded-2xl shadow-lg border-2 border-pink-100 mb-8">
            <div class="flex items-center gap-3">
                <div class="bg-pink-100 p-2 rounded-full">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-pink-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                </div>
                <div>
                    <h1 class="font-bold text-gray-700">Äá»€ KIá»‚M TRA GIá»®A Ká»²</h1>
                    <p class="text-xs text-gray-500">GiÃ¡o trÃ¬nh HÃ¡n ngá»¯</p>
                </div>
            </div>
            <div class="flex items-center gap-2">
                <div class="text-right">
                    <p class="text-xs text-gray-500">Thá»i gian cÃ²n láº¡i</p>
                    <div id="timer" class="text-xl font-bold text-pink-600 font-mono">45:00</div>
                </div>
            </div>
        </div>

        <!-- Student Info -->
        <div class="cute-card p-6 mb-6 border-l-8 border-pink-400">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-semibold text-gray-600 mb-1">Há» vÃ  tÃªn (å§“å):</label>
                    <input type="text" id="studentName" class="w-full p-2 rounded-lg border border-pink-200 focus:ring-2 focus:ring-pink-300 outline-none" placeholder="Nháº­p tÃªn cá»§a báº¡n...">
                </div>
                <div>
                    <label class="block text-sm font-semibold text-gray-600 mb-1">Lá»›p (ç­çº§):</label>
                    <input type="text" class="w-full p-2 rounded-lg border border-pink-200 focus:ring-2 focus:ring-pink-300 outline-none" placeholder="VÃ­ dá»¥: HÃ¡n 1-K15">
                </div>
            </div>
        </div>

        <form id="examForm" onsubmit="return false;">
            
            <!-- Part A -->
            <div class="cute-card p-6 mb-6">
                <div class="flex items-center gap-2 mb-4">
                    <span class="bg-pink-100 text-pink-600 font-bold px-3 py-1 rounded-full text-sm">Pháº§n A</span>
                    <h2 class="font-bold text-gray-700">HoÃ n thÃ nh cÃ¢u (å®Œæˆå¥å­)</h2>
                </div>
                <div class="space-y-4 chinese-text text-lg text-gray-700">
                    <div class="p-3 bg-pink-50 rounded-lg">
                        <span>1. ä½ å­¦</span>
                        <input type="text" class="input-line w-32" placeholder="...">
                        <span>?</span>
                    </div>
                    <div class="p-3 bg-white border border-pink-100 rounded-lg">
                        <span>2. ä»Šå¤©æ˜¯</span>
                        <input type="text" class="input-line w-32" placeholder="...">
                        <span>ã€‚</span>
                    </div>
                    <div class="p-3 bg-pink-50 rounded-lg">
                        <span>3. æˆ‘å»ä¸­å›½ï¼Œæˆ‘å­¦</span>
                        <input type="text" class="input-line w-32" placeholder="...">
                        <span>ã€‚</span>
                    </div>
                    <div class="p-3 bg-white border border-pink-100 rounded-lg">
                        <span>4. æˆ‘å¾ˆå¿™ï¼Œæˆ‘å›</span>
                        <input type="text" class="input-line w-32" placeholder="...">
                        <span>å—?</span>
                    </div>
                    <div class="p-3 bg-pink-50 rounded-lg">
                        <span>5. ä»Šå¤©æ˜ŸæœŸäºŒï¼Œåå¤©</span>
                        <input type="text" class="input-line w-32" placeholder="...">
                        <span>ï¼Œé“¶è¡Œä¸å·¥ä½œã€‚</span>
                    </div>
                </div>
            </div>

            <!-- Part B: Auto-Graded -->
            <div class="cute-card p-6 mb-6 relative overflow-hidden">
                <div class="absolute top-0 right-0 bg-green-100 text-green-600 text-xs px-2 py-1 rounded-bl-lg font-bold">
                    Tá»± Ä‘á»™ng cháº¥m Ä‘iá»ƒm
                </div>
                <div class="flex items-center gap-2 mb-4">
                    <span class="bg-teal-100 text-teal-600 font-bold px-3 py-1 rounded-full text-sm">Pháº§n B</span>
                    <h2 class="font-bold text-gray-700">Sáº¯p xáº¿p cÃ¢u (é‡ç»„å¥å­)</h2>
                </div>
                <p class="text-sm text-gray-500 mb-4 italic">*GÃµ láº¡i cáº£ cÃ¢u hoÃ n chá»‰nh báº±ng chá»¯ HÃ¡n.</p>
                
                <div class="space-y-6">
                    <!-- Q1 -->
                    <div class="border-b border-gray-100 pb-4">
                        <p class="chinese-text text-gray-600 mb-2 bg-gray-50 p-2 rounded">1. çˆ¸çˆ¸ / èº«ä½“ / å¦ˆå¦ˆ / å— / å¥½ / ?</p>
                        <input type="text" id="q_b1" class="w-full p-3 rounded-lg border border-gray-200 focus:border-teal-400 outline-none chinese-text" placeholder="Nháº­p cÃ¢u tráº£ lá»i...">
                        <div id="res_b1" class="correct-answer">ÄÃ¡p Ã¡n: çˆ¸çˆ¸å¦ˆå¦ˆèº«ä½“å¥½å—ï¼Ÿ (hoáº·c å¦ˆå¦ˆçˆ¸çˆ¸...)</div>
                    </div>

                    <!-- Q2 -->
                    <div class="border-b border-gray-100 pb-4">
                        <p class="chinese-text text-gray-600 mb-2 bg-gray-50 p-2 rounded">2. æˆ‘ / é‚®å±€ / å» / ä¿¡ / å¯„ ã€‚</p>
                        <input type="text" id="q_b2" class="w-full p-3 rounded-lg border border-gray-200 focus:border-teal-400 outline-none chinese-text" placeholder="Nháº­p cÃ¢u tráº£ lá»i...">
                        <div id="res_b2" class="correct-answer">ÄÃ¡p Ã¡n: æˆ‘å»é‚®å±€å¯„ä¿¡ã€‚</div>
                    </div>

                    <!-- Q3 -->
                    <div class="border-b border-gray-100 pb-4">
                        <p class="chinese-text text-gray-600 mb-2 bg-gray-50 p-2 rounded">3. æ˜¯ / è¿™ / æ®µ / è€å¸ˆ ã€‚</p>
                        <input type="text" id="q_b3" class="w-full p-3 rounded-lg border border-gray-200 focus:border-teal-400 outline-none chinese-text" placeholder="Nháº­p cÃ¢u tráº£ lá»i...">
                        <div id="res_b3" class="correct-answer">ÄÃ¡p Ã¡n: è¿™æ˜¯æ®µè€å¸ˆã€‚</div>
                    </div>

                    <!-- Q4 -->
                    <div class="border-b border-gray-100 pb-4">
                        <p class="chinese-text text-gray-600 mb-2 bg-gray-50 p-2 rounded">4. è‹±è¯­ / æˆ‘ / åœ¨(á»Ÿ) / ç¾å›½ / å­¦ä¹  ã€‚</p>
                        <input type="text" id="q_b4" class="w-full p-3 rounded-lg border border-gray-200 focus:border-teal-400 outline-none chinese-text" placeholder="Nháº­p cÃ¢u tráº£ lá»i...">
                        <div id="res_b4" class="correct-answer">ÄÃ¡p Ã¡n: æˆ‘åœ¨ç¾å›½å­¦ä¹ è‹±è¯­ã€‚</div>
                    </div>
                    
                     <!-- Q5 (Complex) -->
                     <div class="pb-2">
                        <p class="chinese-text text-gray-600 mb-2 bg-gray-50 p-2 rounded">5. è¯· / å·¥ä½œ / è¯· / å— / å¿™ / å / è¯· / èŒ¶ / å¥½ / å– / æ‚¨ / æ‚¨ / è¿› / ! / ! / ! / ! ã€‚</p>
                        <textarea class="w-full p-3 rounded-lg border border-gray-200 focus:border-teal-400 outline-none chinese-text" rows="2" placeholder="Nháº­p cÃ¢u tráº£ lá»i..."></textarea>
                         <div class="correct-answer">Gá»£i Ã½: æ‚¨å¥½ï¼è¯·è¿›ï¼è¯·åï¼è¯·å–èŒ¶ï¼æ‚¨å·¥ä½œå¿™å—ï¼Ÿ</div>
                    </div>
                </div>
            </div>

            <!-- Part C -->
            <div class="cute-card p-6 mb-6">
                <div class="flex items-center gap-2 mb-4">
                    <span class="bg-purple-100 text-purple-600 font-bold px-3 py-1 rounded-full text-sm">Pháº§n C</span>
                    <h2 class="font-bold text-gray-700">Äáº·t cÃ¢u (é€ å¥)</h2>
                </div>
                <div class="grid gap-4">
                    <div class="flex items-center gap-3">
                        <span class="chinese-text w-20 font-bold text-gray-700">1. å¿™:</span>
                        <input type="text" class="flex-1 p-2 border-b-2 border-purple-100 focus:border-purple-400 outline-none bg-transparent chinese-text">
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="chinese-text w-20 font-bold text-gray-700">2. ä¸­å›½:</span>
                        <input type="text" class="flex-1 p-2 border-b-2 border-purple-100 focus:border-purple-400 outline-none bg-transparent chinese-text">
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="chinese-text w-20 font-bold text-gray-700">3. å¾·è¯­:</span>
                        <input type="text" class="flex-1 p-2 border-b-2 border-purple-100 focus:border-purple-400 outline-none bg-transparent chinese-text">
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="chinese-text w-20 font-bold text-gray-700">4. å­¦æ ¡:</span>
                        <input type="text" class="flex-1 p-2 border-b-2 border-purple-100 focus:border-purple-400 outline-none bg-transparent chinese-text">
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="chinese-text w-20 font-bold text-gray-700">5. æ˜ŸæœŸäºŒ:</span>
                        <input type="text" class="flex-1 p-2 border-b-2 border-purple-100 focus:border-purple-400 outline-none bg-transparent chinese-text">
                    </div>
                </div>
            </div>

            <!-- Part D -->
            <div class="cute-card p-6 mb-6">
                <div class="flex items-center gap-2 mb-4">
                    <span class="bg-blue-100 text-blue-600 font-bold px-3 py-1 rounded-full text-sm">Pháº§n D</span>
                    <h2 class="font-bold text-gray-700">Dá»‹ch thuáº­t (ç¿»è¯‘)</h2>
                </div>
                <div class="space-y-4">
                    <div>
                        <p class="text-sm font-semibold text-gray-600 mb-1">1. Máº¹ tá»› lÃ  ngÆ°á»i Viá»‡t Nam.</p>
                        <textarea class="w-full p-3 rounded-lg bg-blue-50 border-none chinese-text focus:ring-2 focus:ring-blue-200" rows="2"></textarea>
                    </div>
                    <div>
                        <p class="text-sm font-semibold text-gray-600 mb-1">2. TÃ´i thá»© hai, tÆ°, sÃ¡u Ä‘áº¿n Trung tÃ¢m tiáº¿ng Trung Nihao há»c tiáº¿ng Trung.</p>
                        <textarea class="w-full p-3 rounded-lg bg-blue-50 border-none chinese-text focus:ring-2 focus:ring-blue-200" rows="2"></textarea>
                    </div>
                    <div>
                        <p class="text-sm font-semibold text-gray-600 mb-1">3. HÃ´m qua lÃ  chá»§ nháº­t, ngÃ¢n hÃ ng khÃ´ng lÃ m viá»‡c. HÃ´m nay lÃ  thá»© hai, tÃ´i Ä‘i ngÃ¢n hÃ ng rÃºt tiá»n.</p>
                        <textarea class="w-full p-3 rounded-lg bg-blue-50 border-none chinese-text focus:ring-2 focus:ring-blue-200" rows="2"></textarea>
                    </div>
                    <div>
                        <p class="text-sm font-semibold text-gray-600 mb-1 chinese-text">4. è¯·å–èŒ¶! ä½ å“¥å“¥å¦¹å¦¹å¥½å—?</p>
                        <textarea class="w-full p-3 rounded-lg bg-blue-50 border-none focus:ring-2 focus:ring-blue-200" rows="2" placeholder="Dá»‹ch sang tiáº¿ng Viá»‡t..."></textarea>
                    </div>
                     <div>
                        <p class="text-sm font-semibold text-gray-600 mb-1 chinese-text">5. ç‹è€å¸ˆ!æ‚¨å¥½!ä½ å·¥ä½œå¿™å—?</p>
                        <textarea class="w-full p-3 rounded-lg bg-blue-50 border-none focus:ring-2 focus:ring-blue-200" rows="2" placeholder="Dá»‹ch sang tiáº¿ng Viá»‡t..."></textarea>
                    </div>
                </div>
            </div>
            
             <!-- Part E: Dictation/Listening Placeholder -->
            <div class="cute-card p-6 mb-8">
                <div class="flex items-center gap-2 mb-4">
                    <span class="bg-orange-100 text-orange-600 font-bold px-3 py-1 rounded-full text-sm">Pháº§n E</span>
                    <h2 class="font-bold text-gray-700">Nghe viáº¿t (å†™å‡ºä½ æ‰€å¬åˆ°çš„è¯è¯­)</h2>
                </div>
                <p class="text-xs text-gray-400 mb-2 italic">(*GiÃ¡o viÃªn Ä‘á»c, há»c sinh Ä‘iá»n tá»« cÃ²n thiáº¿u)</p>
                <div class="chinese-text text-lg space-y-4 text-gray-700">
                     <div class="p-2 border-b border-dashed border-gray-300">
                        1. A: <input type="text" class="input-line w-24"> å—ï¼Ÿ<br>
                        &nbsp;&nbsp;&nbsp;B: <input type="text" class="input-line w-24">
                    </div>
                     <div class="p-2 border-b border-dashed border-gray-300">
                        2. A: ä½  <input type="text" class="input-line w-24"> æ±‰è¯­ <input type="text" class="input-line w-24"> å—ï¼Ÿ<br>
                        &nbsp;&nbsp;&nbsp;B: ä¸å¤ª <input type="text" class="input-line w-24">
                    </div>
                     <div class="p-2 border-b border-dashed border-gray-300">
                        3. A: ä½  <input type="text" class="input-line w-24"> è‹±è¯­å—ï¼Ÿ<br>
                        &nbsp;&nbsp;&nbsp;B: ä¸ï¼Œ<input type="text" class="input-line w-24">
                    </div>
                     <div class="p-2 border-b border-dashed border-gray-300">
                        4. A: ä»Šå¤© <input type="text" class="input-line w-24"> ?<br>
                        &nbsp;&nbsp;&nbsp;B: ä»Šå¤© <input type="text" class="input-line w-24">
                    </div>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="text-center mb-12">
                <button id="submitBtn" onclick="submitExam()" class="bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white font-bold py-4 px-12 rounded-full shadow-lg transform transition hover:scale-105 text-lg flex items-center gap-2 mx-auto">
                    <span>Ná»™p bÃ i & Xem káº¿t quáº£</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </button>
            </div>
        </form>

        <!-- Result Footer (Hidden initially) -->
        <div id="resultFooter" class="hidden text-center p-6 bg-white rounded-xl shadow-xl border-2 border-teal-100">
            <h3 class="text-2xl font-bold text-teal-600 mb-2">ğŸ‰ ÄÃ£ hoÃ n thÃ nh!</h3>
            <p class="text-gray-600 mb-4">HÃ£y chá»¥p mÃ n hÃ¬nh (Screenshot) toÃ n bá»™ trang nÃ y vÃ  gá»­i cho giÃ¡o viÃªn nhÃ©.</p>
            <div class="inline-block bg-gray-100 p-3 rounded-lg text-left">
                <p class="font-bold text-gray-700">Äiá»ƒm pháº§n B (Tá»± Ä‘á»™ng): <span id="autoScore" class="text-pink-600 text-xl">0</span>/4</p>
                <p class="text-xs text-gray-500">*CÃ¡c pháº§n khÃ¡c giÃ¡o viÃªn sáº½ cháº¥m sau khi nháº­n áº£nh.</p>
            </div>
        </div>

    </div>

    <script>
        // Timer Logic
        let timeLeft = 45 * 60; // 45 minutes
        const timerElement = document.getElementById('timer');
        
        const countdown = setInterval(() => {
            const minutes = Math.floor(timeLeft / 60);
            let seconds = timeLeft % 60;
            seconds = seconds < 10 ? '0' + seconds : seconds;
            
            timerElement.textContent = `${minutes}:${seconds}`;
            
            if (timeLeft <= 0) {
                clearInterval(countdown);
                alert("Háº¿t giá»! Há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng ná»™p bÃ i.");
                submitExam();
            }
            timeLeft--;
        }, 1000);

        // Grading Logic
        function submitExam() {
            // Stop Timer
            clearInterval(countdown);
            
            // UI Changes
            document.body.classList.add('review-mode');
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('resultFooter').classList.remove('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // Lock Inputs
            const inputs = document.querySelectorAll('input, textarea');
            inputs.forEach(input => input.setAttribute('readonly', true));

            // Grade Part B (Simple String Matching)
            let scoreB = 0;
            
            // Helper to clean string (remove spaces and punctuation for loose checking)
            const clean = (str) => str.replace(/[^\u4e00-\u9fa5]/g, ""); 

            // Key Answers for Part B
            const answers = {
                'q_b1': ['çˆ¸çˆ¸å¦ˆå¦ˆèº«ä½“å¥½å—', 'å¦ˆå¦ˆçˆ¸çˆ¸èº«ä½“å¥½å—'],
                'q_b2': ['æˆ‘å»é‚®å±€å¯„ä¿¡'],
                'q_b3': ['è¿™æ˜¯æ®µè€å¸ˆ'],
                'q_b4': ['æˆ‘åœ¨ç¾å›½å­¦ä¹ è‹±è¯­']
            };

            for (let id in answers) {
                const el = document.getElementById(id);
                const userVal = clean(el.value);
                const correctVals = answers[id].map(v => clean(v));
                
                // Visualization logic
                if (correctVals.includes(userVal) && userVal !== "") {
                    scoreB++;
                    el.style.border = "2px solid #22c55e"; // Green
                    el.style.backgroundColor = "#dcfce7";
                    // Add checkmark
                    const check = document.createElement('span');
                    check.innerHTML = "âœ…";
                    check.className = "absolute right-3 top-10"; 
                    el.parentElement.style.position = "relative";
                    el.parentElement.appendChild(check);
                } else {
                    el.style.border = "2px solid #ef4444"; // Red
                    el.style.backgroundColor = "#fee2e2";
                     // Add cross
                    const cross = document.createElement('span');
                    cross.innerHTML = "âŒ";
                    cross.className = "absolute right-3 top-10"; 
                    el.parentElement.style.position = "relative";
                    el.parentElement.appendChild(cross);
                }
            }

            // Update Score Display
            document.getElementById('autoScore').textContent = scoreB;
        }
    </script>
</body>
</html>
