<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hoáº¡t Äá»™ng ÄÃ³ng Vai: Äi Äá»•i Tiá»n (Chá»n NhÃ¢n Váº­t)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f8fb; 
        }
        .container {
            max-width: 900px;
            margin: 1rem auto; /* Reduced top margin */
            padding: 1rem;
        }
        .card-base { /* Base style for all cards */
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem; /* Consistent bottom margin */
            padding: 1.75rem; 
        }
        .main-title {
            font-size: 2rem; /* Slightly smaller */
            font-weight: 700;
            color: #2c5282; 
            margin-bottom: 1rem;
            text-align: center;
        }
        .section-title {
            font-size: 1.4rem; /* Slightly smaller */
            font-weight: 600;
            color: #3182ce; 
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #bee3f8; 
            display: flex;
            align-items: center;
        }
        .section-title i {
            margin-right: 0.75rem;
        }
        .character-card { /* Specific to role cards when displayed */
            background-color: #f7fafc; 
            border: 1px solid #e2e8f0; 
        }
        .character-name {
            font-size: 1.2rem; 
            font-weight: 600;
            color: #2b6cb0; 
            margin-bottom: 0.75rem;
        }
        .character-name i {
            margin-right: 0.5rem;
        }
        .task-description, .script-item {
            margin-bottom: 0.75rem;
            line-height: 1.6;
        }
        .script-item .speaker {
            font-weight: 600;
            color: #dd6b20; 
        }
        .script-item .speaker.clerk {
             color: #38a169; 
        }
        .chinese-text {
            font-style: italic;
            color: #2d3748; 
            font-size: 1.1em;
        }
        .pinyin-text {
            font-size: 0.95em;
            color: #718096; 
            display: none; 
        }
        .pinyin-text.visible {
            display: block; 
            margin-left: 1em; 
        }
        .action-button { /* Common style for main action buttons */
            padding: 0.6rem 1.2rem;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            border: none;
            margin-top: 0.5rem; /* Adjusted margin */
            margin-bottom: 0.5rem; 
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.95rem; /* Slightly smaller font for action buttons */
        }
        .toggle-pinyin-btn { background-color: #ecc94b; color: #2d3748;}
        .toggle-pinyin-btn:hover { background-color: #d69e2e; }
        .change-scenario-btn { background-color: #4299e1; color: white; margin-left: 0.5rem; }
        .change-scenario-btn:hover { background-color: #2b6cb0; }
        .back-to-role-select-btn { background-color: #718096; color: white; margin-bottom: 1rem; }
        .back-to-role-select-btn:hover { background-color: #4a5568; }
        
        .note {
            background-color: #ebf8ff; 
            border-left: 4px solid #3182ce; 
            padding: 1rem;
            margin-top: 1rem;
            font-style: italic;
            color: #2c5282;
        }
        .current-scenario-display {
            text-align: center;
            margin-bottom: 1rem;
            font-weight: 500;
            color: #2c5282;
            background-color: #ebf8ff;
            padding: 0.5rem;
            border-radius: 6px;
        }
        .hidden {
            display: none !important;
        }
        /* Character Selection View */
        #character-selection-view {
            text-align: center;
        }
        #character-selection-view .section-title {
            justify-content: center;
            border-bottom: none;
            font-size: 1.6rem;
        }
        .role-button-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        .role-select-btn {
            padding: 0.8rem 1.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }
        .role-select-btn.customer-btn { background-color: #3b82f6; color: white; }
        .role-select-btn.customer-btn:hover { background-color: #2563eb; transform: translateY(-1px); }
        .role-select-btn.clerk-btn { background-color: #38a169; color: white; }
        .role-select-btn.clerk-btn:hover { background-color: #2f855a; transform: translateY(-1px); }

    </style>
</head>
<body class="p-4">
    <div class="container">
        <h1 class="main-title"><i class="fas fa-comments-dollar"></i> Hoáº¡t Äá»™ng ÄÃ³ng Vai: Äi Äá»•i Tiá»n</h1>
        
        <div id="character-selection-view" class="card-base">
            <h2 class="section-title"><i class="fas fa-user-friends"></i> Chá»n Vai Cá»§a Báº¡n</h2>
            <div class="role-button-container">
                <button id="select-customer-btn" class="role-select-btn customer-btn">
                    <i class="fas fa-user-tie"></i> TÃ´i lÃ  KhÃ¡ch HÃ ng (éº¦å…‹)
                </button>
                <button id="select-clerk-btn" class="role-select-btn clerk-btn">
                    <i class="fas fa-user-cog"></i> TÃ´i lÃ  NhÃ¢n ViÃªn NgÃ¢n HÃ ng (è¥ä¸šå‘˜)
                </button>
            </div>
        </div>

        <div id="role-play-content" class="hidden">
            <button id="back-to-role-select" class="action-button back-to-role-select-btn">
                <i class="fas fa-arrow-left"></i> Quay láº¡i chá»n vai
            </button>

            <div class="card-base">
                <h2 class="section-title"><i class="fas fa-bullseye"></i> Má»¥c tiÃªu</h2>
                <ul class="list-disc pl-5 text-gray-700 mb-4 text-sm">
                    <li>Thá»±c hÃ nh cÃ¡c máº«u cÃ¢u cÆ¡ báº£n khi Ä‘i Ä‘á»•i tiá»n vá»›i cÃ¡c loáº¡i tiá»n tá»‡ vÃ  sá»‘ tiá»n khÃ¡c nhau.</li>
                    <li>LÃ m quen vá»›i tá»« vá»±ng vá» tiá»n tá»‡ vÃ  cÃ¡ch Ä‘á»c sá»‘ lá»›n hÆ¡n.</li>
                    <li>TÄƒng cÆ°á»ng sá»± tá»± tin khi nÃ³i tiáº¿ng Trung.</li>
                </ul>

                <h2 class="section-title"><i class="fas fa-info-circle"></i> HÆ°á»›ng dáº«n chung</h2>
                <p class="text-gray-700 mb-2 text-sm">1. GiÃ¡o viÃªn hoáº·c há»c sinh cÃ³ thá»ƒ nháº¥n nÃºt "Äá»•i TÃ¬nh Huá»‘ng" Ä‘á»ƒ chá»n má»™t ká»‹ch báº£n Ä‘á»•i tiá»n má»›i.</p>
                <p class="text-gray-700 mb-2 text-sm">2. Äá»c ká»¹ "Nhiá»‡m vá»¥" vÃ  "Ká»‹ch báº£n gá»£i Ã½" cho vai cá»§a báº¡n trong tÃ¬nh huá»‘ng hiá»‡n táº¡i.</p>
                <p class="text-gray-700 mb-4 text-sm">3. CÃ¹ng báº¡n diá»…n thá»±c hÃ nh Ä‘oáº¡n há»™i thoáº¡i. Cá»‘ gáº¯ng nÃ³i to, rÃµ rÃ ng vÃ  tá»± nhiÃªn nhÃ©!</p>
                
                <button id="toggle-all-pinyin" class="action-button toggle-pinyin-btn">
                    <i class="fas fa-eye"></i> Hiá»‡n Pinyin
                </button>
                <button id="change-scenario" class="action-button change-scenario-btn">
                    <i class="fas fa-random"></i> Äá»•i TÃ¬nh Huá»‘ng
                </button>
                <div id="current-scenario-info" class="current-scenario-display mt-2">Äang táº£i tÃ¬nh huá»‘ng...</div>
            </div>

            <div id="role-specific-content" class="card-base">
                <h2 class="section-title"><i class="fas fa-user-check"></i> Vai TrÃ² Cá»§a Báº¡n</h2>
                <div id="customer-role-card" class="character-card hidden">
                    <h3 class="character-name"><i class="fas fa-user-tie"></i> KHÃCH HÃ€NG (é¡¾å®¢ - GÃ¹kÃ¨)</h3>
                    <p class="task-description text-gray-700"><strong>TÃªn báº¡n:</strong> <span class="chinese-text">éº¦å…‹</span> <span class="pinyin-text">(MÃ ikÃ¨)</span></p>
                    <div id="customer-task">
                        <p class="task-description text-gray-700"><strong>Nhiá»‡m vá»¥:</strong> Báº¡n Ä‘áº¿n ngÃ¢n hÃ ng Ä‘á»ƒ Ä‘á»•i tiá»n. Báº¡n muá»‘n Ä‘á»•i <strong id="customer-amount-currency" class="text-blue-600">...</strong> sang NhÃ¢n dÃ¢n tá»‡ (<span class="chinese-text">äººæ°‘å¸</span> <span class="pinyin-text">(RÃ©nmÃ­nbÃ¬)</span>).</p>
                    </div>
                    <h4 class="font-semibold text-gray-800 mt-4 mb-2">Ká»‹ch báº£n gá»£i Ã½ cho báº¡n:</h4>
                    <div id="customer-script"></div>
                </div>

                <div id="clerk-role-card" class="character-card hidden">
                    <h3 class="character-name"><i class="fas fa-user-cog"></i> NHÃ‚N VIÃŠN NGÃ‚N HÃ€NG (è¥ä¸šå‘˜ - YÃ­ngyÃ¨yuÃ¡n)</h3>
                     <div id="clerk-task">
                        <p class="task-description text-gray-700"><strong>Nhiá»‡m vá»¥:</strong> Báº¡n lÃ  nhÃ¢n viÃªn ngÃ¢n hÃ ng. Má»™t khÃ¡ch hÃ ng tÃªn lÃ  <span class="chinese-text">éº¦å…‹</span> <span class="pinyin-text">(MÃ ikÃ¨)</span> Ä‘áº¿n Ä‘á»•i tiá»n. HÃ£y giÃºp anh áº¥y Ä‘á»•i <strong id="clerk-amount-currency" class="text-blue-600">...</strong> sang <strong id="clerk-rmb-amount" class="text-green-600">...</strong> NhÃ¢n dÃ¢n tá»‡.</p>
                    </div>
                    <h4 class="font-semibold text-gray-800 mt-4 mb-2">Ká»‹ch báº£n gá»£i Ã½ cho báº¡n:</h4>
                    <div id="clerk-script"></div>
                </div>
                 <div class="note">
                    <p><i class="fas fa-lightbulb mr-2"></i><strong>Máº¹o nhá»:</strong> HÃ£y láº¯ng nghe báº¡n diá»…n vÃ  tráº£ lá»i tá»± nhiÃªn dá»±a trÃªn gá»£i Ã½ nhÃ©!</p>
                </div>
            </div>
        </div>
        
        <footer class="text-center mt-8 py-4 border-t border-gray-300">
            <p class="text-gray-600 text-sm">ChÃºc cÃ¡c em há»c tá»‘t vÃ  cÃ³ má»™t buá»•i luyá»‡n táº­p vui váº»! ğŸ‰</p>
        </footer>
    </div>

    <script>
        const scenarios = [
            { id: 1, customerCurrency: "ç¾å…ƒ", customerCurrencyPinyin: "MÄ›iyuÃ¡n", customerAmount: 200, customerAmountChinese: "äºŒç™¾ç¾å…ƒ", customerAmountPinyin: "Ã¨rbÇi MÄ›iyuÃ¡n", rmbAmount: 1380, rmbAmountChinese: "ä¸€åƒä¸‰ç™¾å…«åå—", rmbAmountPinyin: "yÃ¬qiÄn sÄnbÇi bÄshÃ­ kuÃ i" },
            { id: 2, customerCurrency: "æ¬§å…ƒ", customerCurrencyPinyin: "ÅŒuyuÃ¡n", customerAmount: 300, customerAmountChinese: "ä¸‰ç™¾æ¬§å…ƒ", customerAmountPinyin: "sÄnbÇi ÅŒuyuÃ¡n", rmbAmount: 2250, rmbAmountChinese: "ä¸¤åƒäºŒç™¾äº”åå—", rmbAmountPinyin: "liÇngqiÄn Ã¨rbÇi wÇ”shÃ­ kuÃ i" },
            { id: 3, customerCurrency: "æ—¥å…ƒ", customerCurrencyPinyin: "RÃ¬yuÃ¡n", customerAmount: 50000, customerAmountChinese: "äº”ä¸‡æ—¥å…ƒ", customerAmountPinyin: "wÇ”wÃ n RÃ¬yuÃ¡n", rmbAmount: 2500, rmbAmountChinese: "ä¸¤åƒäº”ç™¾å—", rmbAmountPinyin: "liÇngqiÄn wÇ”bÇi kuÃ i" },
            { id: 4, customerCurrency: "è¶Šå—ç›¾", customerCurrencyPinyin: "YuÃ¨nÃ¡ndÃ¹n", customerAmount: 7000000, customerAmountChinese: "ä¸ƒç™¾ä¸‡è¶Šå—ç›¾", customerAmountPinyin: "qÄ«bÇi wÃ n YuÃ¨nÃ¡ndÃ¹n", rmbAmount: 2100, rmbAmountChinese: "ä¸¤åƒä¸€ç™¾å—", rmbAmountPinyin: "liÇngqiÄn yÄ«bÇi kuÃ i" },
            { id: 5, customerCurrency: "æ¸¯å¸", customerCurrencyPinyin: "GÇngbÃ¬", customerAmount: 1000, customerAmountChinese: "ä¸€åƒæ¸¯å¸", customerAmountPinyin: "yÃ¬qiÄn GÇngbÃ¬", rmbAmount: 880, rmbAmountChinese: "å…«ç™¾å…«åå—", rmbAmountPinyin: "bÄbÇi bÄshÃ­ kuÃ i" }
        ];
        let currentScenarioIndex = 0;
        let selectedUserRole = null; // 'customer' or 'clerk'

        const characterSelectionViewEl = document.getElementById('character-selection-view');
        const rolePlayContentEl = document.getElementById('role-play-content');
        const customerRoleCardEl = document.getElementById('customer-role-card');
        const clerkRoleCardEl = document.getElementById('clerk-role-card');
        
        const toggleAllPinyinBtn = document.getElementById('toggle-all-pinyin');
        const changeScenarioBtn = document.getElementById('change-scenario');
        const currentScenarioInfoEl = document.getElementById('current-scenario-info');
        
        const customerTaskAmountCurrencyEl = document.getElementById('customer-amount-currency');
        const customerScriptEl = document.getElementById('customer-script');
        
        const clerkTaskAmountCurrencyEl = document.getElementById('clerk-amount-currency');
        const clerkTaskRmbAmountEl = document.getElementById('clerk-rmb-amount');
        const clerkScriptEl = document.getElementById('clerk-script');

        const selectCustomerBtn = document.getElementById('select-customer-btn');
        const selectClerkBtn = document.getElementById('select-clerk-btn');
        const backToRoleSelectBtn = document.getElementById('back-to-role-select');


        function formatScriptItem(speaker, speakerPinyin, chinese, pinyin, translation) {
            let speakerClass = speaker.includes("éº¦å…‹") ? "" : "clerk";
            return `
                <div class="script-item">
                    <span class="speaker ${speakerClass}">${speaker} ${speakerPinyin ? '('+speakerPinyin+')' : ''}:</span>
                    <span class="chinese-text">${chinese}</span>
                    <span class="pinyin-text">(${pinyin})</span>
                    <p class="text-xs text-gray-500 italic">(${translation})</p>
                </div>
            `;
        }

        function updateRoleSpecificContentVisibility() {
            if (selectedUserRole === 'customer') {
                customerRoleCardEl.classList.remove('hidden');
                clerkRoleCardEl.classList.add('hidden');
            } else if (selectedUserRole === 'clerk') {
                clerkRoleCardEl.classList.remove('hidden');
                customerRoleCardEl.classList.add('hidden');
            } else { // No role selected, or back to selection
                customerRoleCardEl.classList.add('hidden');
                clerkRoleCardEl.classList.add('hidden');
            }
        }

        function loadScenario(index) {
            const scenario = scenarios[index];
            currentScenarioIndex = index;

            currentScenarioInfoEl.innerHTML = `TÃ¬nh huá»‘ng ${scenario.id}: Äá»•i <strong class="text-blue-600">${scenario.customerAmountChinese}</strong> <span class="pinyin-text">(${scenario.customerAmountPinyin})</span> sang NhÃ¢n dÃ¢n tá»‡.`;

            customerTaskAmountCurrencyEl.innerHTML = `<span class="chinese-text">${scenario.customerAmountChinese}</span> <span class="pinyin-text">(${scenario.customerAmountPinyin})</span>`;
            customerScriptEl.innerHTML = `
                ${formatScriptItem("éº¦å…‹", "MÃ ikÃ¨", "å°å§ï¼Œä½ å¥½ï¼", "XiÇojiÄ›, nÇ hÇo!", "ChÃ o cÃ´!")}
                ${formatScriptItem("éº¦å…‹", "MÃ ikÃ¨", "æˆ‘æ¢é’±ã€‚", "WÇ’ huÃ nqiÃ¡n.", "TÃ´i Ä‘á»•i tiá»n.")}
                ${formatScriptItem("éº¦å…‹", "MÃ ikÃ¨", `æˆ‘æ¢äººæ°‘å¸ã€‚æˆ‘è¦æ¢${scenario.customerCurrency}ã€‚`, `WÇ’ huÃ n RÃ©nmÃ­nbÃ¬. WÇ’ yÃ o huÃ n ${scenario.customerCurrencyPinyin}.`, `TÃ´i Ä‘á»•i NhÃ¢n dÃ¢n tá»‡. TÃ´i muá»‘n Ä‘á»•i ${scenario.customerCurrency}.`)}
                ${formatScriptItem("éº¦å…‹", "MÃ ikÃ¨", scenario.customerAmountChinese + "ã€‚", scenario.customerAmountPinyin + ".", `${scenario.customerAmount} ${scenario.customerCurrency}.`)}
                ${formatScriptItem("éº¦å…‹", "MÃ ikÃ¨", "è°¢è°¢ï¼", "XiÃ¨xie!", "Cáº£m Æ¡n!")}
            `;

            clerkTaskAmountCurrencyEl.innerHTML = `<span class="chinese-text">${scenario.customerAmountChinese}</span> <span class="pinyin-text">(${scenario.customerAmountPinyin})</span>`;
            clerkTaskRmbAmountEl.innerHTML = `<span class="chinese-text">${scenario.rmbAmountChinese}</span> <span class="pinyin-text">(${scenario.rmbAmountPinyin})</span>`;
            clerkScriptEl.innerHTML = `
                ${formatScriptItem("è¥ä¸šå‘˜", "YÃ­ngyÃ¨yuÃ¡n", "ä½ å¥½ï¼", "NÇ hÇo!", "ChÃ o anh!")}
                ${formatScriptItem("è¥ä¸šå‘˜", "YÃ­ngyÃ¨yuÃ¡n", "æ‚¨æ¢ä»€ä¹ˆé’±ï¼Ÿ", "NÃ­n huÃ n shÃ©nme qiÃ¡n?", "NgÃ i Ä‘á»•i tiá»n gÃ¬ áº¡?")}
                ${formatScriptItem("è¥ä¸šå‘˜", "YÃ­ngyÃ¨yuÃ¡n", "æ¢å¤šå°‘ï¼Ÿ", "HuÃ n duÅshao?", "Äá»•i bao nhiÃªu áº¡?")}
                ${formatScriptItem("è¥ä¸šå‘˜", "YÃ­ngyÃ¨yuÃ¡n", "è¯·ç­‰ä¸€ä¼šå„¿ã€‚", "QÇng dÄ›ng yÄ«huÃ¬r.", "Xin Ä‘á»£i má»™t lÃ¡t.")}
                ${formatScriptItem("è¥ä¸šå‘˜", "YÃ­ngyÃ¨yuÃ¡n", `å…ˆç”Ÿï¼Œç»™æ‚¨é’±ï¼Œ${scenario.rmbAmountChinese}äººæ°‘å¸ã€‚è¯·æ•°æ•°ã€‚`, `XiÄnsheng, gÄ›i nÃ­n qiÃ¡n, ${scenario.rmbAmountPinyin} RÃ©nmÃ­nbÃ¬. QÇng shÇ”shu.`, `ThÆ°a Ã´ng, gá»­i Ã´ng tiá»n, ${scenario.rmbAmount} NhÃ¢n dÃ¢n tá»‡. Xin má»i Ã´ng Ä‘áº¿m láº¡i.`)}
                ${formatScriptItem("è¥ä¸šå‘˜", "YÃ­ngyÃ¨yuÃ¡n", "ä¸å®¢æ°”ï¼", "BÃº kÃ¨qi!", "KhÃ´ng cÃ³ chi!")}
            `;
            
            updatePinyinVisibility();
        }
        
        function updatePinyinVisibility() {
            const allPinyinTexts = document.querySelectorAll('#role-play-content .pinyin-text'); // Target only pinyin in role play view
            const isPinyinGlobalVisible = toggleAllPinyinBtn.innerHTML.includes('áº¨n');
            allPinyinTexts.forEach(pinyin => {
                if (isPinyinGlobalVisible) {
                    pinyin.classList.add('visible');
                } else {
                    pinyin.classList.remove('visible');
                }
            });
        }


        toggleAllPinyinBtn.addEventListener('click', () => {
            const isCurrentlyVisible = toggleAllPinyinBtn.innerHTML.includes('áº¨n');
            if (isCurrentlyVisible) {
                toggleAllPinyinBtn.innerHTML = '<i class="fas fa-eye"></i> Hiá»‡n Pinyin';
            } else {
                toggleAllPinyinBtn.innerHTML = '<i class="fas fa-eye-slash"></i> áº¨n Pinyin';
            }
            updatePinyinVisibility();
        });

        changeScenarioBtn.addEventListener('click', () => {
            currentScenarioIndex = (currentScenarioIndex + 1) % scenarios.length;
            loadScenario(currentScenarioIndex);
        });
        
        selectCustomerBtn.addEventListener('click', () => {
            selectedUserRole = 'customer';
            characterSelectionViewEl.classList.add('hidden');
            rolePlayContentEl.classList.remove('hidden');
            updateRoleSpecificContentVisibility();
            loadScenario(currentScenarioIndex); // Load current scenario for the selected role
        });

        selectClerkBtn.addEventListener('click', () => {
            selectedUserRole = 'clerk';
            characterSelectionViewEl.classList.add('hidden');
            rolePlayContentEl.classList.remove('hidden');
            updateRoleSpecificContentVisibility();
            loadScenario(currentScenarioIndex); // Load current scenario for the selected role
        });

        backToRoleSelectBtn.addEventListener('click', () => {
            rolePlayContentEl.classList.add('hidden');
            characterSelectionViewEl.classList.remove('hidden');
            selectedUserRole = null;
            // Hide both role cards when going back
            customerRoleCardEl.classList.add('hidden');
            clerkRoleCardEl.classList.add('hidden');
        });

        // Initial load
        loadScenario(0); // Pre-load data for scenario 0, but cards are hidden until role selection
        // Show character selection view by default
        characterSelectionViewEl.classList.remove('hidden');
        rolePlayContentEl.classList.add('hidden');

    </script>
</body>
</html>
