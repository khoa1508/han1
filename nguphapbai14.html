<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ngữ pháp Hán ngữ Bài 14: 有点儿, 一点儿 & 还是</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Custom styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Tailwind gray-50 */
        }
        .pinyin, .viet-meaning {
            display: none; /* Hide by default */
            transition: all 0.3s ease-in-out;
        }
        .show-pinyin .pinyin {
            display: block;
        }
        .show-viet .viet-meaning {
            display: block;
        }
        .tab-active {
            border-color: #3b82f6; /* blue-500 */
            background-color: #3b82f6;
            color: white;
        }
        .answer {
            display: none;
            background-color: #eef2ff; /* indigo-50 */
            border-left: 4px solid #6366f1; /* indigo-500 */
        }
        .draggable {
            cursor: move;
            transition: transform 0.2s ease;
        }
        .dragging {
            opacity: 0.5;
            transform: scale(1.05);
        }
        .drop-zone {
            border: 2px dashed #9ca3af; /* gray-400 */
            min-height: 50px;
        }
        .drop-zone.drag-over {
            border-color: #3b82f6; /* blue-500 */
            background-color: #eff6ff; /* blue-50 */
        }
        .feedback {
            display: none;
            font-weight: 600;
        }
        .feedback.correct {
            display: block;
            color: #16a34a; /* green-600 */
        }
        .feedback.incorrect {
            display: block;
            color: #dc2626; /* red-600 */
        }
    </style>
</head>
<body class="text-gray-800">

    <div id="app-container" class="max-w-5xl mx-auto p-4 sm:p-6 lg:p-8">
        
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-blue-600 mb-2">Ngữ pháp Hán ngữ - Bài 14</h1>
            <p class="text-lg text-gray-600">Phân biệt 有点儿 (yǒudiǎnr), 一点儿 (yīdiǎnr) và cách dùng 还是 (háishi)</p>
        </header>

        <!-- Global Controls -->
        <div class="flex justify-center items-center space-x-4 mb-8 p-4 bg-white rounded-xl shadow-md">
            <span class="font-semibold text-gray-700">Tùy chọn hiển thị:</span>
            <button id="toggle-pinyin-btn" class="px-4 py-2 bg-blue-100 text-blue-700 font-semibold rounded-lg hover:bg-blue-200 transition-colors">Bật/Tắt Pinyin</button>
            <button id="toggle-viet-btn" class="px-4 py-2 bg-indigo-100 text-indigo-700 font-semibold rounded-lg hover:bg-indigo-200 transition-colors">Bật/Tắt Nghĩa Việt</button>
        </div>

        <!-- Tab Navigation -->
        <div class="mb-8">
            <div id="tabs" class="flex justify-center border-b border-gray-200">
                <button data-tab="grammar" class="tab-btn px-6 py-3 font-semibold text-gray-500 border-b-2 border-transparent hover:text-blue-600 hover:border-blue-600 transition-all tab-active">
                    📖 Ngữ pháp
                </button>
                <button data-tab="context" class="tab-btn px-6 py-3 font-semibold text-gray-500 border-b-2 border-transparent hover:text-blue-600 hover:border-blue-600 transition-all">
                    💬 Mẫu câu & Ngữ cảnh
                </button>
                <button data-tab="practice" class="tab-btn px-6 py-3 font-semibold text-gray-500 border-b-2 border-transparent hover:text-blue-600 hover:border-blue-600 transition-all">
                    ✍️ Luyện tập
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <main>
            <!-- Grammar Section -->
            <div id="grammar" class="tab-content">
                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <!-- 有点儿 vs 一点儿 -->
                    <div class="mb-8">
                        <h2 class="text-2xl font-bold mb-4 text-indigo-600">A. Phân biệt 有点儿 (yǒudiǎnr) và 一点儿 (yīdiǎnr)</h2>
                        <p class="mb-6 text-gray-600">`有点儿` và `一点儿` đều có nghĩa là "một chút", nhưng cách dùng và sắc thái biểu cảm hoàn toàn khác nhau. Hãy cùng phân biệt nhé!</p>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left border-collapse">
                                <thead>
                                    <tr class="bg-gray-100">
                                        <th class="p-4 font-semibold border-b-2 border-gray-200">Tiêu chí</th>
                                        <th class="p-4 font-semibold border-b-2 border-gray-200">有点儿 (yǒudiǎnr)</th>
                                        <th class="p-4 font-semibold border-b-2 border-gray-200">一点儿 (yīdiǎnr)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-b border-gray-200">
                                        <td class="p-4 font-medium">Biểu tượng</td>
                                        <td class="p-4">😕 (Thường mang sắc thái phàn nàn, không vừa ý)</td>
                                        <td class="p-4">😊 (Mang sắc thái đề nghị, miêu tả khách quan)</td>
                                    </tr>
                                    <tr class="border-b border-gray-200 bg-gray-50">
                                        <td class="p-4 font-medium">Công thức</td>
                                        <td class="p-4 font-mono">S + 有点儿 + Adj/V(tâm lý)</td>
                                        <td class="p-4 font-mono">1. V + 一点儿 + N <br> 2. Adj + 一点儿</td>
                                    </tr>
                                    <tr class="border-b border-gray-200">
                                        <td class="p-4 font-medium">Ví dụ</td>
                                        <td class="p-4">
                                            <p class="text-lg">我最近<strong class="text-red-500">有点儿</strong>忙。</p>
                                            <p class="pinyin text-gray-500">wǒ zuìjìn yǒudiǎnr máng.</p>
                                            <p class="viet-meaning text-blue-600 italic">Dạo này tôi hơi bận.</p>
                                        </td>
                                        <td class="p-4">
                                            <p class="text-lg">喝<strong class="text-green-500">点儿</strong>什么？</p>
                                            <p class="pinyin text-gray-500">hē diǎnr shénme?</p>
                                            <p class="viet-meaning text-blue-600 italic">Uống một chút gì không?</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- 还是 -->
                    <div>
                        <h2 class="text-2xl font-bold mb-4 text-indigo-600">B. Câu hỏi lựa chọn với 还是 (háishi)</h2>
                        <p class="mb-4 text-gray-600">`还是` (háishi) là "át chủ bài" khi bạn muốn đặt câu hỏi yêu cầu người nghe lựa chọn giữa hai hoặc nhiều khả năng.</p>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <p class="mb-2"><strong class="font-semibold">Công thức:</strong> <code class="bg-gray-200 px-2 py-1 rounded">... A + 还是 + B?</code></p>
                            <p class="mb-4"><strong class="font-semibold">Ý nghĩa:</strong> "... A hay là B?"</p>
                            <div class="space-y-2">
                                <p class="text-lg">你的车是新的<strong class="text-purple-600">还是</strong>旧的？</p>
                                <p class="pinyin text-gray-500">nǐ de chē shì xīn de háishi jiù de?</p>
                                <p class="viet-meaning text-blue-600 italic">Xe của bạn là xe mới hay cũ?</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Context Section -->
            <div id="context" class="tab-content hidden">
                <div class="bg-white p-6 rounded-xl shadow-lg space-y-8">
                    <div>
                        <h2 class="text-2xl font-bold mb-4 text-indigo-600">Ngữ cảnh 1: Thầy Vương và Giám đốc Quan gặp lại</h2>
                        <div class="space-y-4 p-4 border-l-4 border-blue-400 bg-blue-50 rounded-r-lg">
                            <p><strong class="font-semibold">关经理:</strong> 王老师，好久不见了。</p>
                            <p><strong class="font-semibold text-blue-700">Thầy Vương:</strong> 啊！关经理，欢迎！刚开学，<strong class="text-red-500">有点儿</strong>忙。喝点儿什么？茶<strong class="text-purple-600">还是</strong>咖啡？</p>
                            <p class="pinyin text-gray-500">À! Guān jīnglǐ, huānyíng! Gāng kāixué, <strong class="text-red-500">yǒudiǎnr</strong> máng. Hē diǎnr shénme? Chá <strong class="text-purple-600">háishi</strong> kāfēi?</p>
                            <p class="viet-meaning text-blue-600 italic">A! Giám đốc Quan, chào mừng! Mới khai giảng, nên hơi bận một chút. Ngài uống chút gì không? Trà hay cà phê?</p>
                        </div>
                    </div>
                    <div>
                        <h2 class="text-2xl font-bold mb-4 text-indigo-600">Ngữ cảnh 2: Tìm xe đạp</h2>
                        <div class="space-y-4 p-4 border-l-4 border-green-400 bg-green-50 rounded-r-lg">
                            <p><strong class="font-semibold">田芳:</strong> 我的车呢？</p>
                            <p><strong class="font-semibold text-green-700">张东:</strong> 你的车是什么颜色的？是新的<strong class="text-purple-600">还是</strong>旧的？</p>
                            <p class="pinyin text-gray-500">Nǐ de chē shì shénme yánsè de? Shì xīn de <strong class="text-purple-600">háishi</strong> jiù de?</p>
                            <p class="viet-meaning text-blue-600 italic">Xe của bạn màu gì? Là xe mới hay cũ?</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Practice Section -->
            <div id="practice" class="tab-content hidden">
                <div class="bg-white p-6 rounded-xl shadow-lg space-y-10">
                    <!-- Exercise 1 -->
                    <div>
                        <h2 class="text-2xl font-bold mb-4 text-indigo-600">Bài 1: Chọn từ đúng - `有点儿` hay `一点儿`?</h2>
                        <div class="space-y-4">
                            <div class="exercise-item">
                                <p class="text-lg">1. 这件衣服 ______ 贵，我不想买。</p>
                                <button class="toggle-answer mt-2 px-3 py-1 text-sm bg-gray-200 rounded hover:bg-gray-300">Xem đáp án</button>
                                <p class="answer mt-2 p-2"><strong>Đáp án:</strong> 有点儿 (Diễn tả sự phàn nàn "hơi đắt quá").</p>
                            </div>
                            <div class="exercise-item">
                                <p class="text-lg">2. 我今天很累，只想吃 ______ 东西。</p>
                                <button class="toggle-answer mt-2 px-3 py-1 text-sm bg-gray-200 rounded hover:bg-gray-300">Xem đáp án</button>
                                <p class="answer mt-2 p-2"><strong>Đáp án:</strong> 一点儿 (Động từ + 一点儿 + Danh từ: ăn một chút đồ).</p>
                            </div>
                             <div class="exercise-item">
                                <p class="text-lg">3. 他今天 ______ 不高兴，不知道为什么。</p>
                                <button class="toggle-answer mt-2 px-3 py-1 text-sm bg-gray-200 rounded hover:bg-gray-300">Xem đáp án</button>
                                <p class="answer mt-2 p-2"><strong>Đáp án:</strong> 有点儿 (Chỉ trạng thái tâm lý "hơi không vui").</p>
                            </div>
                        </div>
                    </div>
                    <!-- Exercise 2 -->
                    <div>
                        <h2 class="text-2xl font-bold mb-4 text-indigo-600">Bài 2: Dựng câu hỏi với `还是`</h2>
                        <div class="space-y-4">
                            <div class="exercise-item">
                                <p class="text-lg">1. 学习英语 / 学习汉语</p>
                                <button class="toggle-answer mt-2 px-3 py-1 text-sm bg-gray-200 rounded hover:bg-gray-300">Xem đáp án</button>
                                <p class="answer mt-2 p-2"><strong>Đáp án:</strong> 你学习英语还是学习汉语？</p>
                            </div>
                            <div class="exercise-item">
                                <p class="text-lg">2. 去银行 / 去邮局</p>
                                <button class="toggle-answer mt-2 px-3 py-1 text-sm bg-gray-200 rounded hover:bg-gray-300">Xem đáp án</button>
                                <p class="answer mt-2 p-2"><strong>Đáp án:</strong> 你去银行还是去邮局？</p>
                            </div>
                        </div>
                    </div>
                    <!-- Exercise 3: Drag and Drop -->
                    <div>
                        <h2 class="text-2xl font-bold mb-4 text-indigo-600">Bài 3: Sắp xếp câu</h2>
                        <p class="mb-4 text-gray-600">Kéo các từ vào ô trống để tạo thành câu hoàn chỉnh.</p>
                        <div id="drag-drop-exercise">
                            <div id="source-words" class="flex flex-wrap gap-2 p-4 bg-gray-100 rounded-lg mb-4">
                                <div class="draggable bg-white p-2 rounded shadow border" draggable="true">还是</div>
                                <div class="draggable bg-white p-2 rounded shadow border" draggable="true">他的</div>
                                <div class="draggable bg-white p-2 rounded shadow border" draggable="true">自行车</div>
                                <div class="draggable bg-white p-2 rounded shadow border" draggable="true">旧的</div>
                                <div class="draggable bg-white p-2 rounded shadow border" draggable="true">新的</div>
                                <div class="draggable bg-white p-2 rounded shadow border" draggable="true">是</div>
                            </div>
                            <div id="drop-zone" class="drop-zone flex flex-wrap gap-2 p-4 rounded-lg items-center"></div>
                            <div class="mt-4 flex items-center space-x-4">
                                <button id="check-dnd-btn" class="px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg hover:bg-blue-600">Kiểm tra</button>
                                <button id="reset-dnd-btn" class="px-4 py-2 bg-gray-500 text-white font-semibold rounded-lg hover:bg-gray-600">Làm lại</button>
                                <span id="dnd-feedback" class="feedback"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- Global Toggles ---
            const appContainer = document.getElementById('app-container');
            const togglePinyinBtn = document.getElementById('toggle-pinyin-btn');
            const toggleVietBtn = document.getElementById('toggle-viet-btn');

            togglePinyinBtn.addEventListener('click', () => {
                appContainer.classList.toggle('show-pinyin');
            });

            toggleVietBtn.addEventListener('click', () => {
                appContainer.classList.toggle('show-viet');
            });

            // --- Tab Navigation ---
            const tabsContainer = document.getElementById('tabs');
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');

            tabsContainer.addEventListener('click', (e) => {
                const clickedTab = e.target.closest('.tab-btn');
                if (!clickedTab) return;

                const tabId = clickedTab.dataset.tab;

                // Update button styles
                tabButtons.forEach(btn => btn.classList.remove('tab-active'));
                clickedTab.classList.add('tab-active');

                // Update content visibility
                tabContents.forEach(content => {
                    if (content.id === tabId) {
                        content.classList.remove('hidden');
                    } else {
                        content.classList.add('hidden');
                    }
                });
            });

            // --- Exercise Answer Toggles ---
            const answerToggles = document.querySelectorAll('.toggle-answer');
            answerToggles.forEach(button => {
                button.addEventListener('click', () => {
                    const answer = button.nextElementSibling;
                    if (answer.style.display === 'block') {
                        answer.style.display = 'none';
                        button.textContent = 'Xem đáp án';
                    } else {
                        answer.style.display = 'block';
                        button.textContent = 'Ẩn đáp án';
                    }
                });
            });

            // --- Drag and Drop Exercise ---
            const draggables = document.querySelectorAll('.draggable');
            const dropZone = document.getElementById('drop-zone');
            const sourceWordsContainer = document.getElementById('source-words');
            const checkBtn = document.getElementById('check-dnd-btn');
            const resetBtn = document.getElementById('reset-dnd-btn');
            const feedbackEl = document.getElementById('dnd-feedback');
            const correctAnswer = "他的自行车是新的还是旧的";

            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', () => {
                    draggable.classList.add('dragging');
                });
                draggable.addEventListener('dragend', () => {
                    draggable.classList.remove('dragging');
                });
            });

            function setupDropZoneEvents(container) {
                container.addEventListener('dragover', e => {
                    e.preventDefault();
                    container.classList.add('drag-over');
                    const afterElement = getDragAfterElement(container, e.clientY);
                    const dragging = document.querySelector('.dragging');
                    if (afterElement == null) {
                        container.appendChild(dragging);
                    } else {
                        container.insertBefore(dragging, afterElement);
                    }
                });
                 container.addEventListener('dragleave', () => {
                    container.classList.remove('drag-over');
                });
                container.addEventListener('drop', () => {
                    container.classList.remove('drag-over');
                });
            }

            setupDropZoneEvents(dropZone);
            setupDropZoneEvents(sourceWordsContainer);


            function getDragAfterElement(container, y) {
                const draggableElements = [...container.querySelectorAll('.draggable:not(.dragging)')];
                return draggableElements.reduce((closest, child) => {
                    const box = child.getBoundingClientRect();
                    const offset = y - box.top - box.height / 2;
                    if (offset < 0 && offset > closest.offset) {
                        return { offset: offset, element: child };
                    } else {
                        return closest;
                    }
                }, { offset: Number.NEGATIVE_INFINITY }).element;
            }

            checkBtn.addEventListener('click', () => {
                const userWords = [...dropZone.querySelectorAll('.draggable')];
                const userAnswer = userWords.map(word => word.textContent).join('');
                
                feedbackEl.classList.remove('correct', 'incorrect');

                if (userAnswer === correctAnswer) {
                    feedbackEl.textContent = 'Chính xác! Rất tốt!';
                    feedbackEl.classList.add('correct');
                } else {
                    feedbackEl.textContent = 'Chưa đúng, hãy thử lại nhé!';
                    feedbackEl.classList.add('incorrect');
                }
            });

            resetBtn.addEventListener('click', () => {
                const words = [...dropZone.querySelectorAll('.draggable')];
                words.forEach(word => sourceWordsContainer.appendChild(word));
                feedbackEl.classList.remove('correct', 'incorrect');
                feedbackEl.style.display = 'none';
            });

        });
    </script>
</body>
</html>
